<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-monthly" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">31 posts tagged with &quot;monthly&quot; | Cardano Scaling</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://cardano-scaling.org/monthly/tags/monthly/page/3"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="31 posts tagged with &quot;monthly&quot; | Cardano Scaling"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/img/faviconl.io"><link data-rh="true" rel="canonical" href="https://cardano-scaling.org/monthly/tags/monthly/page/3"><link data-rh="true" rel="alternate" href="https://cardano-scaling.org/monthly/tags/monthly/page/3" hreflang="en"><link data-rh="true" rel="alternate" href="https://cardano-scaling.org/monthly/tags/monthly/page/3" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/monthly/rss.xml" title="Cardano Scaling RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/monthly/atom.xml" title="Cardano Scaling Atom Feed">



<script src="https://plausible.io/js/script.js" defer="defer" data-domain="hydra.family"></script><link rel="stylesheet" href="/assets/css/styles.d23c1e19.css">
<script src="/assets/js/runtime~main.4d3c2d81.js" defer="defer"></script>
<script src="/assets/js/main.8dc0d6cc.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/scaling-logo-draft-black.png" alt="" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/scaling-logo-draft-white.png" alt="" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Cardano Scaling</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/monthly">Monthly reports</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/cardano-scaling" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Monthly reports</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/monthly/2025-08">August 2025</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/monthly/2025-06">June 2025</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/monthly/2025-05">May 2025</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/monthly/2025-04">April 2025</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/monthly/2025-03">March 2025</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/monthly/2025-02">February 2025</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/monthly/2025-01">January 2025</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/monthly/2024-11">November 2024</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/monthly/2024-10">October 2024</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/monthly/2024-09">September 2024</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/monthly/2024-08">August 2024</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/monthly/2024-07">July 2024</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/monthly/2024-06">June 2024</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/monthly/2024-05">May 2024</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/monthly/2024-04">April 2024</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/monthly/2024-03">March 2024</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/monthly/2024-02">February 2024</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/monthly/2024-01">January 2024</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/monthly/2023-11">November 2023</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/monthly/2023-10">October 2023</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/monthly/2023-09">September 2023</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/monthly/2023-08">August 2023</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/monthly/2023-07">July 2023</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/monthly/2023-06">June 2023</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/monthly/2023-05">May 2023</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/monthly/2023-04">April 2023</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/monthly/2023-03">March 2023</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/monthly/2023-02">February 2023</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/monthly/2023-01">January 2023</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/monthly/2022-12">December 2022</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/monthly/2022-11">November 2022</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><header class="margin-bottom--xl"><h1>31 posts tagged with &quot;monthly&quot;</h1><a href="/monthly/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="This report summarizes the work on Hydra since August 2023. It serves as"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/monthly/2023-09">September 2023</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-09-29T07:35:24.000Z" itemprop="datePublished">September 29, 2023</time> Â· <!-- -->9 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/ch1bo" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/ch1bo.png" alt="Sebastian Nagel" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ch1bo" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Sebastian Nagel</span></a></div><small class="avatar__subtitle" itemprop="description">Software Engineering Lead, IOG</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>This report summarizes the work on Hydra since August 2023. It serves as
preparation for the monthly review meeting (see <a href="https://docs.google.com/presentation/d/1YAWR4pz1gG2dwtGvm5KOAHtrjRcchPLUKhDA16u10ps" target="_blank" rel="noopener noreferrer">slides</a> and
<a href="https://drive.google.com/file/d/1X8QnmG9gddR-t2V6F2oE7bYCYAEs2RPe/view" target="_blank" rel="noopener noreferrer">recording</a>), where the team updates project stakeholders on recent
developments to gather their feedback on proposed plans.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="roadmap">Roadmap<a href="#roadmap" class="hash-link" aria-label="Direct link to Roadmap" title="Direct link to Roadmap">â€‹</a></h2>
<p>This month, the
<a href="https://github.com/orgs/input-output-hk/projects/21/views/7" target="_blank" rel="noopener noreferrer">roadmap</a> has not
changed much as the team mostly clarified upcoming features.</p>
<p><img decoding="async" loading="lazy" alt="The roadmap with features and ideas" src="/assets/images/2023-09-roadmap-0db0b73e23619ca19806a878e3a37091.png" width="2913" height="1133" class="img_ev3q"> <small><center>The latest roadmap with features and ideas</center></small></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="notable-updates">Notable updates<a href="#notable-updates" class="hash-link" aria-label="Direct link to Notable updates" title="Direct link to Notable updates">â€‹</a></h4>
<ul>
<li>
<p>Added and completed <a href="https://github.com/input-output-hk/hydra/issues/1043" target="_blank" rel="noopener noreferrer">support for inline datums in commit API #1043</a>, which was reported by a user.</p>
</li>
<li>
<p>Current work on <a href="https://github.com/input-output-hk/hydra/issues/188" target="_blank" rel="noopener noreferrer">network resilience #188</a> yielded two new / follow-up items <a href="https://github.com/input-output-hk/hydra/issues/1079" target="_blank" rel="noopener noreferrer">#1079</a> and <a href="https://github.com/input-output-hk/hydra/issues/1080" target="_blank" rel="noopener noreferrer">#1080</a>. To minimize the &#x27;scope creep&#x27; from this topic, the team has narrowed down the direct goal to improve the situation incrementally.</p>
</li>
<li>
<p>When detailing the design of incremental de-/commits, the feature was also split in two. Each of the features would have a different impact on the user experience and relates to other ideas:</p>
<ul>
<li>
<p><a href="https://github.com/input-output-hk/hydra/issues/199" target="_blank" rel="noopener noreferrer">Incremental commit #199</a> is a bit more complicated, but paves the way for directly open heads and could make <a href="https://github.com/input-output-hk/hydra/issues/699" target="_blank" rel="noopener noreferrer">Always abortable head #699</a> redundant.</p>
</li>
<li>
<p><a href="https://github.com/input-output-hk/hydra/issues/1057" target="_blank" rel="noopener noreferrer">Incremental decommit #1057</a> is fairly straightforward and can be evolved into &#x27;partial fanouts&#x27;, which solves similar problems as the <a href="https://github.com/input-output-hk/hydra/issues/190" target="_blank" rel="noopener noreferrer">split-fanout #190</a> and <a href="https://github.com/input-output-hk/hydra/issues/370" target="_blank" rel="noopener noreferrer">only signing closable snapshots #370</a> would address. Also, the <a href="https://github.com/input-output-hk/hydra/issues/198" target="_blank" rel="noopener noreferrer">optimistic head closure #198</a> feature is closely related to this item.</p>
</li>
</ul>
</li>
<li>
<p>Added a new feature to improve user journey of running the <code>hydra-node</code> by <a href="https://github.com/input-output-hk/hydra/issues/1064" target="_blank" rel="noopener noreferrer">removing the command line defaults #1064</a>. This came out of prior <a href="https://github.com/input-output-hk/hydra/discussions/454" target="_blank" rel="noopener noreferrer">idea discussion #454</a> which highlights the life cycle of ideas and features on the Hydra project.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-scaling-workshop-in-nantes-france">Cardano Scaling workshop in Nantes, France<a href="#cardano-scaling-workshop-in-nantes-france" class="hash-link" aria-label="Direct link to Cardano Scaling workshop in Nantes, France" title="Direct link to Cardano Scaling workshop in Nantes, France">â€‹</a></h2>
<p>From 2023-09-12 to 2023-09-14, most of the <em>Scaling Tribe</em> members, that is the two Hydra and Mithril teams, met for a three-day workshop in the beautiful French city of <a href="https://en.wikipedia.org/wiki/Nantes" target="_blank" rel="noopener noreferrer">Nantes</a>. This workshop was run following the <a href="https://openspaceworld.org/wp2/" target="_blank" rel="noopener noreferrer">Open Space</a> technique which makes room for every participant to experiment and focus on what&#x27;s of interest for them at the time while being engaging for the whole team. Here is a selection of topics covered that were most relevant to Hydra.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="aiken-validator-experiment">Aiken validator experiment<a href="#aiken-validator-experiment" class="hash-link" aria-label="Direct link to Aiken validator experiment" title="Direct link to Aiken validator experiment">â€‹</a></h3>
<p>As part of the workshop, we explored how hard it would be to implement one of
the Hydra validators in <code>aiken</code>. After roughly two hours of work we had a
<code>hydra-node</code> running, tests passing and benchmarks of verifying one step in the
Hydra protocol using aiken.</p>
<p>The <code>hydra-node</code> just uses the UPLC binary and its hash to construct
transactions, we could rely on the same interface, with the difference that the
script binary gets produced by <code>aiken</code>. Aiken does produce a socalled blueprint
<code>plutus.json</code> containing the contract. We staged that file into git and embedded
it into a Haskell interface to be able to reference the compiled script as
<code>SerialisedScript</code> from <code>hydra-node</code>.</p>
<p>Next, we ported the simplest contract we have, namely the
<a href="https://github.com/input-output-hk/hydra/blob/ec6c7a2ab651462228475d0b34264e9a182c22bb/hydra-plutus/src/Hydra/Contract/Commit.hs" target="_blank" rel="noopener noreferrer">Commit</a>
validator, <a href="https://github.com/input-output-hk/hydra/blob/4ec572511fc13a526b85efce3aac556ae5bd007c/hydra-plutus/validators/commit.ak" target="_blank" rel="noopener noreferrer">to
Aiken</a>.
This was fairly straight-forward and we test were passing after some fiddling
with internal representations of data structures (<code>plutus-tx</code> is encoding triples
as <code>Constr</code> data on-chain).</p>
<p>The results? A significant reduction in script size, cpu and memory usage on
<code>collect</code> and <code>abort</code> transactions - or in different words, <a href="https://github.com/input-output-hk/hydra/pull/1072#issuecomment-1717644108" target="_blank" rel="noopener noreferrer">doubling the
supported</a>
number of parties in a Head. ðŸŽ‰</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="shallow-cardano-node-experiment">Shallow cardano-node experiment<a href="#shallow-cardano-node-experiment" class="hash-link" aria-label="Direct link to Shallow cardano-node experiment" title="Direct link to Shallow cardano-node experiment">â€‹</a></h3>
<p>Running a hydra-node requires running a cardano-node, and running a
cardano-node requires synchronisation with the chain and about 150
gigabytes of data to be downloaded and verified, which is a
significant barrier to quickly spin-up hydra-node and Hydra
Heads. Given a Hydra node does not need to look at the history of the
chain, a <em>Shallow</em> cardano-node that can run without the full database
of immutable files would be fine, assuming we can retrieve a recent
state of the chain with the same security guarantees than a fully
synchronised chain. This is exactly what Mithril can provide!</p>
<p>We ran a small experiment, trying to start a cardano-node manually
removing all but the last files from the <em>immutable DB</em> and it worked
as long as one does not query the node for a block too old in the
past. This lead us to envision an improved user experience for
installing and running a hydra-node, by packaging it with a
cardano-node and a mithril-client to retrieve only the minimum needed
state and be able to start a fully functioning hydra-node in minutes.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="other-topics">Other topics<a href="#other-topics" class="hash-link" aria-label="Direct link to Other topics" title="Direct link to Other topics">â€‹</a></h3>
<ul>
<li>We continued working on <a href="https://github.com/input-output-hk/hydra/issues/1078" target="_blank" rel="noopener noreferrer">Kupo x
Hydra</a>
integration, benefiting from the presence of Kupo&#x27;s creator and
former Hydra team member, Matthias Benkort</li>
<li>We brainstormed possible synergies between the Hydra and Mithril
projects, something that solidified into the desire to explore this
concept of &quot;Shallow node&quot; and its integration within Hydra</li>
<li>We discussed and clarified our new <a href="https://github.com/input-output-hk/hydra/pull/1088" target="_blank" rel="noopener noreferrer">Security Vulnerability
Disclosure
Policy</a></li>
<li>Discussing the idea of a joint documentation effort, we realised the
existing documentation of both teams could be improved, for example
by following a <a href="https://documentation.divio.com" target="_blank" rel="noopener noreferrer">Standard documentation
framework</a>.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="hydra-development">Hydra development<a href="#hydra-development" class="hash-link" aria-label="Direct link to Hydra development" title="Direct link to Hydra development">â€‹</a></h2>
<p><a href="https://github.com/input-output-hk/hydra/issues?q=is%3Aclosed+sort%3Aupdated-desc+closed%3A2023-08-29..2023-09-29" target="_blank" rel="noopener noreferrer">Issues and pull requests closed since the last
report</a></p>
<p>This month, the team worked on the following:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="network-resilience-to-disconnects-188">Network resilience to disconnects <a href="https://github.com/input-output-hk/hydra/issues/188" target="_blank" rel="noopener noreferrer">#188</a><a href="#network-resilience-to-disconnects-188" class="hash-link" aria-label="Direct link to network-resilience-to-disconnects-188" title="Direct link to network-resilience-to-disconnects-188">â€‹</a></h4>
<p>If a Hydra node crashes, it can recover its state from disk thanks to the
<a href="https://github.com/input-output-hk/hydra/pull/1000" target="_blank" rel="noopener noreferrer">event-sourced persistency</a>
mechanism in place. But if a peer inside the head sends messages while the node
is down, these messages are lost for this node and this can well lead to the
head being stuck.</p>
<p>For instance, in the following picture, we see that if Bob was down when Alice
acknowledged snapshot 10, then it will wait forever for this acknowledgement and
will refuse to move forward with the head, making it stuck.</p>
<p><img decoding="async" loading="lazy" alt="Head stuck because of lost message" src="/assets/images/2023-09-head-stuck-e89cfe83fa8b153326d46f1910d00b9d.png" width="854" height="1082" class="img_ev3q"> <small><center>Head stuck because of lost message</center></small></p>
<p>Hydra is designed to deal with non-cooperative peers in a very safe way:
close the head! And this situation could be generalized as a non cooperative
peer situation. So the safe move is to just close the head.</p>
<p>But practically speaking, closing the head every time a node restarts or a network
connection is interrupted can lead to an operations nightmare. So the question we&#x27;re
exploring is, can we distinguish between non cooperative peer or just transient
communication issue?</p>
<ul>
<li><a href="https://github.com/input-output-hk/hydra/blob/master/docs/adr/2023-09-08_027-network-resilience.md" target="_blank" rel="noopener noreferrer">ADR 27</a>
gives details about our current strategy</li>
<li><a href="https://github.com/input-output-hk/hydra/pull/1074" target="_blank" rel="noopener noreferrer">#1074</a> is a first implementation of this strategy</li>
<li><a href="https://github.com/input-output-hk/hydra/issues/1080" target="_blank" rel="noopener noreferrer">#1080</a> should specify the resulting network protocol so that others could implement compatible hydra nodes</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="incremental-commits-and-decommits-199">Incremental commits and decommits <a href="https://github.com/input-output-hk/hydra/issues/199" target="_blank" rel="noopener noreferrer">#199</a><a href="#incremental-commits-and-decommits-199" class="hash-link" aria-label="Direct link to incremental-commits-and-decommits-199" title="Direct link to incremental-commits-and-decommits-199">â€‹</a></h4>
<p>In the beginning of this month, some progress on incremental commits and
decommits was made. An early
<a href="https://twitter.com/ch1bo_/status/1696067253089743289" target="_blank" rel="noopener noreferrer">experiment</a> about the
off-chain / node logic showed that we can re-use the <code>/commit</code> validator and
motivated design work on the feature items.</p>
<p>As mentioned above, the protocol extension was split into two items <a href="https://github.com/input-output-hk/hydra/issues/199" target="_blank" rel="noopener noreferrer">Incremental
commits #199</a> and
[Incremental decommits</p>
<h1><a href="https://github.com/input-output-hk/hydra/issues/1057" target="_blank" rel="noopener noreferrer">1057</a>. Both items contain</h1>
<p>high-level description, interaction outline and a first design of the on-chain
validators which is currently getting discussed by the Hydra contributors and
researchers.</p>
<p>Especially the incremental commit is not trivial as the interaction between
layer 1 and layer 2 is quite intricate. Observing a deposit on the Cardano
mainchain may not be seen by all parties at the same time and this should not
lock up the layer 2 process of transactions, while premature usage of committed
funds is to be avoided. On the other hand, each step in the protocol needs to be
secure in presence of an adversary and unlocking of committed funds must always
be possible.</p>
<p>Once this validator design is clear, we can get started implementing one or both
of the features to enable more flexible usage of the Hydra head protocol.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="refactored-chain-state-1049">Refactored chain state <a href="https://github.com/input-output-hk/hydra/pull/1049" target="_blank" rel="noopener noreferrer">#1049</a><a href="#refactored-chain-state-1049" class="hash-link" aria-label="Direct link to refactored-chain-state-1049" title="Direct link to refactored-chain-state-1049">â€‹</a></h4>
<p>Following up the implementation of ADR#24, this marks the first enhancement in
a series of refinements, and our goal was optimization.</p>
<p>We eliminated the need for recursive types in persisted chain states,
transitioning to a non-empty history model, preserving full backward
compatibility with existing systems.</p>
<p>Importantly, throughout this refactor, we&#x27;ve kept the interface between the
chain and logic layers entirely unchanged. This ensures a smooth transition and
seamless integration with existing components.</p>
<p>One of the notable advantages of this refactor is a reduced persistence
footprint. We now store individual points of the chain state, enhancing storage
efficiency.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="community">Community<a href="#community" class="hash-link" aria-label="Direct link to Community" title="Direct link to Community">â€‹</a></h2>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="open-source-contributions">Open source contributions<a href="#open-source-contributions" class="hash-link" aria-label="Direct link to Open source contributions" title="Direct link to Open source contributions">â€‹</a></h4>
<p>This month some open source contributions were received, and the team was able to
contribute back to one project:</p>
<ul>
<li>Hydra: Lightning network-style payments <a href="https://hydra.family/head-protocol/unstable/use-cases/payments/lighting-network-like-payments/" target="_blank" rel="noopener noreferrer">use case</a> write-up by <a href="https://github.com/k-solutions" target="_blank" rel="noopener noreferrer">@k-solutions</a></li>
<li>Aiken: Started an emacs <a href="https://github.com/aiken-lang/aiken-mode" target="_blank" rel="noopener noreferrer">aiken-mode</a> by @ch1bo (triggered by our experiments)</li>
<li>Hydra: Small <a href="https://github.com/input-output-hk/hydra/pull/1042" target="_blank" rel="noopener noreferrer">fix in the docs</a> by <a href="http://github.com/caike" target="_blank" rel="noopener noreferrer">@caike</a> (from RareEvo workshop)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="current-scaling-use-cases-being-tracked">Current scaling use cases being tracked<a href="#current-scaling-use-cases-being-tracked" class="hash-link" aria-label="Direct link to Current scaling use cases being tracked" title="Direct link to Current scaling use cases being tracked">â€‹</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="hypix">Hypix<a href="#hypix" class="hash-link" aria-label="Direct link to Hypix" title="Direct link to Hypix">â€‹</a></h5>
<ul>
<li>An update of hydraw with improved usability to stimulate user engagement</li>
<li>A showcase for Hydra, with an option to productize</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="bookio">Book.io<a href="#bookio" class="hash-link" aria-label="Direct link to Book.io" title="Direct link to Book.io">â€‹</a></h5>
<ul>
<li>A Web3 marketplace for tokenized digital eBooks and Audiobooks</li>
<li>Requires NFT minting and distribution at scale (for each copy/instance of a book)</li>
<li>Opened a discussion to investigate possible approaches to scaling their operations on Cardano</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="midnight">Midnight<a href="#midnight" class="hash-link" aria-label="Direct link to Midnight" title="Direct link to Midnight">â€‹</a></h5>
<ul>
<li>DUST airdrop and side-chain operation</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="singularitynet">SingularityNet<a href="#singularitynet" class="hash-link" aria-label="Direct link to SingularityNet" title="Direct link to SingularityNet">â€‹</a></h5>
<ul>
<li>A Web3 marketplace for AI services offered and consumed through a pay-per-use API</li>
<li>Discussion ongoing about porting an existing Ethereum solution to Cardano</li>
<li>A chance to build on previous Hydra Pay efforts and upgrade the design to support unidirectional micropayments channels</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="sundaelabs">SundaeLabs<a href="#sundaelabs" class="hash-link" aria-label="Direct link to SundaeLabs" title="Direct link to SundaeLabs">â€‹</a></h5>
<ul>
<li>Sundae proposed a ledger-only mode of Hydra, modelled on Gummiworm (the protocol used by SundaeSwap)</li>
<li><a href="https://cardano.ideascale.com/c/idea/102138" target="_blank" rel="noopener noreferrer">https://cardano.ideascale.com/c/idea/102138</a></li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="emurgo">Emurgo<a href="#emurgo" class="hash-link" aria-label="Direct link to Emurgo" title="Direct link to Emurgo">â€‹</a></h5>
<ul>
<li>Initial discussions to evaluate building a payments channel network using Hydra</li>
<li>Could leverage work done on Hydra Pay by Obsidian</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">â€‹</a></h2>
<p>The monthly review meeting for September 2023 was held on 2023-09-20 via Google
Meet with these <a href="https://docs.google.com/presentation/d/1YAWR4pz1gG2dwtGvm5KOAHtrjRcchPLUKhDA16u10ps" target="_blank" rel="noopener noreferrer">slides</a> and the <a href="https://drive.google.com/file/d/1X8QnmG9gddR-t2V6F2oE7bYCYAEs2RPe/view" target="_blank" rel="noopener noreferrer">recording</a>.</p>
<p>This concludes yet another fully-packed month, this time not only
focusing on Hydra but also encompassing Mithril and the broader goal of
supporting Cardano&#x27;s scaling effort to the best of our
ability. Meeting and working together in person demonstrated once
more, if this were needed, how much a small group of highly motivated
people can achieve. It also fueled our desire and consolidated our
vision of being a small group of engineers with a clear <em>purpose</em>,
scratching our &quot;own itch&quot;, contributing to the whatever projects and
tools is needed and best for the job at hand, relentlessly prototyping
and experimenting collectively to find the best solutions solving
actual people&#x27;s problems.</p>
<p>It is also worth mentioning that Catalyst&#x27;s Fund 10 outcome should
result in more contributions to Hydra (and hopefully Mithril!) in the
near term.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/monthly/tags/monthly">monthly</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="This report summarizes the work on Hydra since July 2023. It serves as"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/monthly/2023-08">August 2023</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-08-30T13:35:03.000Z" itemprop="datePublished">August 30, 2023</time> Â· <!-- -->6 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/pgrange" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/pgrange.png" alt="Pascal Grange" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/pgrange" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Pascal Grange</span></a></div><small class="avatar__subtitle" itemprop="description">Senior Software Engineer, IOG</small></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/v0d1ch" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/v0d1ch.png" alt="Sasha Bogicevic" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/v0d1ch" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Sasha Bogicevic</span></a></div><small class="avatar__subtitle" itemprop="description">Senior Software Engineer, IOG</small></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/ffakenz" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/ffakenz.png" alt="Franco Testagrossa" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ffakenz" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Franco Testagrossa</span></a></div><small class="avatar__subtitle" itemprop="description">Senior Software Engineer, IOG</small></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/ch1bo" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/ch1bo.png" alt="Sebastian Nagel" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ch1bo" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Sebastian Nagel</span></a></div><small class="avatar__subtitle" itemprop="description">Software Engineering Lead, IOG</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>This report summarizes the work on Hydra since July 2023. It serves as
preparation for the monthly review meeting (see <a href="https://docs.google.com/presentation/d/1MrCeUsYb3FQk7aCwMZdQs8mc5BfLOIjkK9gcWzgDdDc/edit#slide=id.g1f87a7454a5_0_1392" target="_blank" rel="noopener noreferrer">slides</a> and
<a href="https://drive.google.com/file/d/14pDsf0hDyh9HK8sCSMmkmT8gY8YxgOQ8/view" target="_blank" rel="noopener noreferrer">recording</a>), where the team updates project stakeholders on recent
developments to gather their feedback on proposed plans.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="roadmap">Roadmap<a href="#roadmap" class="hash-link" aria-label="Direct link to Roadmap" title="Direct link to Roadmap">â€‹</a></h2>
<p>This month, the team released version 0.12.0, and the project
<a href="https://github.com/orgs/input-output-hk/projects/21/views/7" target="_blank" rel="noopener noreferrer">roadmap</a> has been
slightly updated to focus 0.13.0 on network resiliency and bump incremental
commit and decommit in priority:</p>
<p><img decoding="async" loading="lazy" alt="The roadmap with features and ideas" src="/assets/images/2023-08-roadmap-8a47097a86ba8dc4a2a48767414fa548.jpg" width="2048" height="682" class="img_ev3q"> <small><center>The latest roadmap with features and ideas</center></small></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="release-0120">Release 0.12.0<a href="#release-0120" class="hash-link" aria-label="Direct link to Release 0.12.0" title="Direct link to Release 0.12.0">â€‹</a></h4>
<ul>
<li>
<p>Support cardano-node 8.1.2</p>
<ul>
<li>Updated client and Plutus versions</li>
</ul>
</li>
<li>
<p>Layer 2 protocol changes</p>
<ul>
<li>Authenticated messages</li>
<li>Removed redundancy</li>
</ul>
</li>
<li>
<p>Event-sourced persistence</p>
</li>
<li>
<p>New API endpoints</p>
</li>
<li>
<p>Removal of <em>internal commit</em> endpoint</p>
</li>
<li>
<p>Improved off-chain transaction processing performance</p>
</li>
<li>
<p>Security fixes</p>
</li>
<li>
<p>See <a href="https://github.com/input-output-hk/hydra/releases/tag/0.12.0" target="_blank" rel="noopener noreferrer">full release notes</a> and a list of <a href="https://github.com/input-output-hk/hydra/milestone/12?closed=1" target="_blank" rel="noopener noreferrer">delivered features</a></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="development">Development<a href="#development" class="hash-link" aria-label="Direct link to Development" title="Direct link to Development">â€‹</a></h2>
<p><a href="https://github.com/input-output-hk/hydra/issues?q=is%3Aclosed+sort%3Aupdated-desc+closed%3A2023-07-28..2023-08-29" target="_blank" rel="noopener noreferrer">Issues and pull requests closed since the last
report</a></p>
<p>This month, the team worked on the following:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="update-the-tutorial-and-include-mithril-997">Update the tutorial and include Mithril <a href="https://github.com/input-output-hk/hydra/issues/997" target="_blank" rel="noopener noreferrer">#997</a><a href="#update-the-tutorial-and-include-mithril-997" class="hash-link" aria-label="Direct link to update-the-tutorial-and-include-mithril-997" title="Direct link to update-the-tutorial-and-include-mithril-997">â€‹</a></h4>
<p>To prepare for the Hydra master class at RareEvo, the team has taken the
originally written tutorial for Hydra version 0.8.0 and updated it to work with the latest
versions.</p>
<p>The challenge was to write content that is both easily comprehensible and functional across a wide
range of user platforms, including operating system and processor architectures.</p>
<p>Besides writing the tutorial, it is essential to ensure that it is kept
up-to-date (eg, using continuous integration).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="support-cardano-node-812-1007">Support cardano-node 8.1.2 <a href="https://github.com/input-output-hk/hydra/issues/1007" target="_blank" rel="noopener noreferrer">#1007</a><a href="#support-cardano-node-812-1007" class="hash-link" aria-label="Direct link to support-cardano-node-812-1007" title="Direct link to support-cardano-node-812-1007">â€‹</a></h4>
<p>To be able to use the latest Mithril snapshots to bootstrap a
<code>cardano-node</code> for the <code>hydra-node</code>, we needed to make some updates.</p>
<p>The <code>hydra-node</code> uses the <code>cardano-api</code> to establish a connection with the node using the node-to-client protocols. The format there has slightly changed (although versioned), necessitating an update to the version of <code>cardano-api</code> used within the <code>hydra-node</code>.</p>
<p>The way Haskell dependencies are managed required an adjustment of the versions for both <code>cardano-ledger</code> and <code>plutus</code>. These versions are used to construct our off-chain ledger and on-chain Hydra Head protocol scripts, respectively.</p>
<p>As a result, this process has proven to be more intricate than it might initially sound. However, it has ultimately resulted in enhancements to the efficiency of our on-chain scripts.</p>
<p>TODO: how much?</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="event-sourced-persistence-913">Event-sourced persistence <a href="https://github.com/input-output-hk/hydra/issues/913" target="_blank" rel="noopener noreferrer">#913</a><a href="#event-sourced-persistence-913" class="hash-link" aria-label="Direct link to event-sourced-persistence-913" title="Direct link to event-sourced-persistence-913">â€‹</a></h4>
<p>We want the hydra-node to be efficient in processing events to yield high
throughput on processing transactions off-chain.</p>
<p>Work done as part of <a href="https://github.com/input-output-hk/hydra/issues/186" target="_blank" rel="noopener noreferrer">#186</a>
has demonstrated that the primary bottleneck to faster transaction processing
inside the node was the state persistence logic, which simply overwrites the
full state with whatever new state has been produced.</p>
<p>For that reason, we changed the persistent state to a sequence of events
according to <a href="https://hydra.family/head-protocol/adr/24" target="_blank" rel="noopener noreferrer">ADR24</a>. Persistence is now done incrementally by saving
only the <code>StateChanged</code> deltas.</p>
<p>As a consequence, the first spike confirmed the following performance
improvements: master ~300ms â†’ spike ~6ms.</p>
<p>TODO: what are the numbers on master before/after?</p>
<p>Finally, this also opens up interesting possibilities for state observation in
clients.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="new-api-endpoints">New API endpoints<a href="#new-api-endpoints" class="hash-link" aria-label="Direct link to New API endpoints" title="Direct link to New API endpoints">â€‹</a></h4>
<p>This release also includes several additions to the Hydra API. We added the
<a href="https://github.com/input-output-hk/hydra/pull/1001" target="_blank" rel="noopener noreferrer">/cardano-transaction
endpoint</a> to submit a
transaction to the layer 1 network. This feature improves developer experience as
Hydra clients do not need direct chain access (eg, connect to <code>cardano-node</code>)
to be able to submit transactions.</p>
<p>The other new <a href="https://github.com/input-output-hk/hydra/pull/989" target="_blank" rel="noopener noreferrer">/protocol-parameters
endpoint</a> serves the
currently configured protocol parameters used in <code>hydra-node</code>. This provides
more flexibility when creating transactions for the head on the client side and
avoids configuration or hard-coded values.</p>
<p>On top of this, we also included the hydra-node
<a href="https://github.com/input-output-hk/hydra/pull/985" target="_blank" rel="noopener noreferrer">version</a> inside of the
<code>Greetings</code> message. This is very useful for debugging purposes and detecting
possible version mismatches.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="removal-of-internal-commit-endpoint-1018">Removal of &#x27;internal commit&#x27; endpoint <a href="https://github.com/input-output-hk/hydra/pull/1018" target="_blank" rel="noopener noreferrer">#1018</a><a href="#removal-of-internal-commit-endpoint-1018" class="hash-link" aria-label="Direct link to removal-of-internal-commit-endpoint-1018" title="Direct link to removal-of-internal-commit-endpoint-1018">â€‹</a></h4>
<p>In the previous release, we made an announcement regarding the deprecation of committing to the head through the websocket command. Subsequently, we have taken steps to eliminate this client command, which in turn resulted in the removal of the <em>fuel</em> markers that were previously used to mark the UTXO of the internal Hydra wallet meant for use in the Head.</p>
<p>This simplifies the setup needed to run the Head protocol and improves security
since users can directly commit funds from their wallets without sending them to
the Head operator beforehand.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="community">Community<a href="#community" class="hash-link" aria-label="Direct link to Community" title="Direct link to Community">â€‹</a></h2>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="hydra-master-class-at-rareevo">Hydra master class at RareEvo<a href="#hydra-master-class-at-rareevo" class="hash-link" aria-label="Direct link to Hydra master class at RareEvo" title="Direct link to Hydra master class at RareEvo">â€‹</a></h4>
<p>We were happy to run a Hydra master class session at RareEvo 2023. The session
attracted 30+ attendees for the introductory parts including a presentation on
Hydra and Mithril. About 10-15 participants remained for the practical part and
following discussion.</p>
<p>We also streamed the event live on Discord, but were not able to interact much
there. The responses were positive though and we should be doing more things in
the public on this #hydra-live channel.</p>
<p>Several participants managed to use Mithril and synchronize a pre-production cardano-node; two teams effectively initiated Hydra heads, conducted fund transactions within them, and subsequently closed them. The major challenges, as expected, concerned installation and networking. In the future, we intend to ensure the availability of prebuilt binaries catering to a wider range of platforms.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="catalyst-fund10">Catalyst Fund10<a href="#catalyst-fund10" class="hash-link" aria-label="Direct link to Catalyst Fund10" title="Direct link to Catalyst Fund10">â€‹</a></h4>
<p>The team screened all the proposals mentioning Hydra and
<a href="https://mithril.network/doc/" target="_blank" rel="noopener noreferrer">Mithril</a>. We submitted 11 community reviews and
noticed, in particular, the following proposals:</p>
<ul>
<li><a href="https://cardano.ideascale.com/c/idea/102138" target="_blank" rel="noopener noreferrer">Sundae Labs Hydra Ledger-only Mode</a></li>
<li><a href="https://cardano.ideascale.com/c/idea/102200" target="_blank" rel="noopener noreferrer">Sundae Labs Hydra Transaction Stream Plugin</a></li>
<li><a href="https://cardano.ideascale.com/c/idea/101626" target="_blank" rel="noopener noreferrer">Hydra as a B2B layer for DeFi - a white paper and an MVP</a></li>
<li><a href="https://cardano.ideascale.com/c/idea/104411" target="_blank" rel="noopener noreferrer">Decentralized Demeter.run - Federated Frontend Hosting - New revenue stream for SPOs</a></li>
<li><a href="https://cardano.ideascale.com/c/idea/105113" target="_blank" rel="noopener noreferrer">Mithril - Open-source contributor</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">â€‹</a></h2>
<p>The monthly review meeting for August 2023 was held on 2023-08-23 via Google
Meet with these <a href="https://docs.google.com/presentation/d/1MrCeUsYb3FQk7aCwMZdQs8mc5BfLOIjkK9gcWzgDdDc/edit#slide=id.g1f87a7454a5_0_1392" target="_blank" rel="noopener noreferrer">slides</a> and the <a href="https://drive.google.com/file/d/14pDsf0hDyh9HK8sCSMmkmT8gY8YxgOQ8/view" target="_blank" rel="noopener noreferrer">recording</a>, &#x27;broadcasting live from warm and sunny Colorado&#x27;!</p>
<p>It has been an interesting and unusual month. Some of the team had been in
Longmont, CO to prepare for the RareEvo event and we used the chance to have the
meeting in a hybrid setting with some IO stakeholders attending live on-site and
about 20 community members online.</p>
<p>This time, the demo was about the updated tutorial and demonstrating the full
setup of the cardano-node, opening a Hydra head on the pre-production network, and submitting
transactions off-chain in 15 minutes!</p>
<p>The feedback we received included inquiries about the timing, method, and extent of the audit for the Head protocol. While we will have an internal audit, which is already
helping us improve the protocol, there are no plans for a significant external audit with funding. We also had the chance to look into and learn about some Catalyst Fund10
proposals involving Hydra. Hopefully, some or all of them get funded and we are
looking forward to testing the Hydrazoa concept, implementing the ledger-mode operation, enabling federated Heads, and achieving other objectives.</p>
<p>At the RareEvo event, we had the chance to meet and communicate with various people
from the community. This ranges from known Hydra collaborators to tech-savvy
stake pool operators, to representatives of successful applications running on
Cardano for scaling purposes like <a href="https://book.io/" target="_blank" rel="noopener noreferrer">book.io</a>.</p>
<p>Also with a new full-time contributor on board, we are keen to add more
functionality while the first applications prepare to utilize Hydra in production
on mainnet.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/monthly/tags/monthly">monthly</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="This report summarizes the work on Hydra since June 2023. It serves as"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/monthly/2023-07">July 2023</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-07-31T15:09:18.000Z" itemprop="datePublished">July 31, 2023</time> Â· <!-- -->9 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/ch1bo" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/ch1bo.png" alt="Sebastian Nagel" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ch1bo" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Sebastian Nagel</span></a></div><small class="avatar__subtitle" itemprop="description">Software Engineering Lead, IOG</small></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/abailly-iohk" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/abailly-iohk.png" alt="Arnaud Bailly" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/abailly-iohk" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Arnaud Bailly</span></a></div><small class="avatar__subtitle" itemprop="description">Lead Architect, IOG</small></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/v0d1ch" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/v0d1ch.png" alt="Sasha Bogicevic" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/v0d1ch" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Sasha Bogicevic</span></a></div><small class="avatar__subtitle" itemprop="description">Senior Software Engineer, IOG</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>This report summarizes the work on Hydra since June 2023. It serves as
preparation for the monthly review meeting (see <a href="https://docs.google.com/presentation/d/1CQYAFztRcqofN6sbowg37QuXQ-DQU4NcDmoMghS36B8" target="_blank" rel="noopener noreferrer">slides</a> and
<a href="https://drive.google.com/file/d/14ANZ3efuxgXpYK94EBWxZLR9TtN7voru/" target="_blank" rel="noopener noreferrer">recording</a>), where the team updates project stakeholders on recent
developments to gather their feedback on proposed plans.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="starmap-update">Starmap update<a href="#starmap-update" class="hash-link" aria-label="Direct link to Starmap update" title="Direct link to Starmap update">â€‹</a></h3>
<p>Every couple of months, the team reflects on the themes identified for 2023 (as
presented in <a href="/monthly/2023-01#themes-for-2023">January</a>), and creates a high
level list of possible deliverables,
eg using <a href="/assets/files/2022-11-impact-97ad611fd8b3395a70498f12d26703de.png" target="_blank">impact maps</a>. This time, the team has come up
with the following items:</p>
<p><img decoding="async" loading="lazy" src="/assets/images/2023-07-starmap-6362d6f36ed51d70e68fa77b1dd39bf9.png" width="1676" height="931" class="img_ev3q"></p>
<ul>
<li>
<p>Sustainable open-source <!-- -->ðŸ’š</p>
<ul>
<li>
<p><strong>Hydra master-class workshop</strong>: A concrete session we aim to conduct in an
upcoming event or online as a fallback. This will also be a motivation to
update our existing tutorials and improve the first-start
experience.</p>
</li>
<li>
<p><strong>Engage and support developer community on Catalyst proposals</strong>: There are
around 30 proposals mentioning Hydra in the current Catalyst funding round
and we want to review, comment, try to align, and maybe even promote some
proposals. The goal is to provide a platform for many new ideas while avoiding fragmentation and maximizing the reuse of work.</p>
</li>
<li>
<p><strong>Further open up GitHub repositories</strong>: We want to provide a welcoming
experience to non-IOG contributors and provide an easy-to-navigate group of
repositories relating to Hydra.</p>
</li>
</ul>
</li>
<li>
<p>Mainnet mature application <!-- -->ðŸ’œ</p>
<ul>
<li>
<p><strong>Make Hydra trivial to use</strong>: To enhance user and developer experience, we aim to enable a quick and frictionless setup of Hydra, possibly involving Mithril to get started. Our goal is to facilitate the opening of a distributed Hydra head with two nodes on a testnet within just a few minutes.</p>
</li>
<li>
<p><strong>Build a basic head explorer</strong>: We have previously experimented with the explorer, and now we are looking to set it up for the long term. The goal is not only to assess Hydra adoption but also to provide a valuable tool for DApp developers. Additionally, we aim to create a visualization that end users can use to answer important questions, such as &#x27;who is running this head?&#x27;</p>
</li>
</ul>
</li>
<li>
<p>Drive adoption <!-- -->ðŸ’™</p>
<ul>
<li>
<p><strong>Deliver the first version of HydraNow to mainnet</strong>:
It&#x27;s important that the very promising use case of payments using
Hydra is made available to first users on mainnet. As a concrete example, this would be
a mobile application &#x27;HydraNow&#x27;, which uses a <code>hydra-pay</code> service to enable
peer-to-peer payment channels.</p>
</li>
<li>
<p><strong>Enable uni-directional payment channels</strong>: This will expand the
capabilities of any payment channel created using Hydra, allowing deposits and
withdrawals while keeping the head open.</p>
</li>
</ul>
</li>
</ul>
<p>Work packages related to these items appear on the technical
roadmap (especially <a href="https://github.com/orgs/input-output-hk/projects/21/views/26" target="_blank" rel="noopener noreferrer">in this view</a>) and in our community activities.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="roadmap">Roadmap<a href="#roadmap" class="hash-link" aria-label="Direct link to Roadmap" title="Direct link to Roadmap">â€‹</a></h2>
<p>This month, the team released version 0.11.0, which shifts the way Hydra clients
need to interact with the hydra-node when committing funds. The project
<a href="https://github.com/orgs/input-output-hk/projects/21" target="_blank" rel="noopener noreferrer">roadmap</a> was also updated
to reflect the latest developments and ideas from the starmap:</p>
<p><img decoding="async" loading="lazy" alt="The roadmap without idea items" src="/assets/images/2023-07-roadmap-ex-ideas-f40d1c16b8ce755d0bc83b342c86bc8a.png" width="1938" height="1055" class="img_ev3q"> <small><center>The roadmap without idea items</center></small></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="release-0110">Release 0.11.0<a href="#release-0110" class="hash-link" aria-label="Direct link to Release 0.11.0" title="Direct link to Release 0.11.0">â€‹</a></h4>
<ul>
<li>
<p>Completes the layer 2 ledger isomorphism with timed transaction support</p>
</li>
<li>
<p>Adds commit from external wallets API, which allows to:</p>
<ul>
<li>Commit multiple UTXO</li>
<li>Commit from scripts</li>
<li>Commit directly from any key</li>
</ul>
</li>
<li>
<p>Deprecated: Internal commits via the WebSocket API</p>
</li>
<li>
<p>See <a href="https://github.com/input-output-hk/hydra/releases/tag/0.11.0" target="_blank" rel="noopener noreferrer">full release notes</a> and a list of <a href="https://github.com/input-output-hk/hydra/milestone/11?closed=1" target="_blank" rel="noopener noreferrer">delivered features</a></p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="notable-updates">Notable updates<a href="#notable-updates" class="hash-link" aria-label="Direct link to Notable updates" title="Direct link to Notable updates">â€‹</a></h4>
<ul>
<li>
<p>Two new items _<em>elevated</em> from user ideas and improved the API capabilities:</p>
<ul>
<li>The <a href="https://github.com/input-output-hk/hydra/issues/735" target="_blank" rel="noopener noreferrer">ability to read protocol parameters via API #735</a></li>
<li>The ability to<a href="https://github.com/input-output-hk/hydra/issues/966" target="_blank" rel="noopener noreferrer">submit layer 1 transactions through hydra-node #966</a></li>
</ul>
</li>
<li>
<p>[Removing commit from internal wallet #954](Submit layer 1 transactions through
hydra-node#954) is a consequence of deprecating this functionality in the
previous 0.11.0 release. This will make the code base and documentation
cleaner as there will be only one way to commit funds to a head.</p>
</li>
<li>
<p>The first new item derived from the starmap is to <a href="https://github.com/input-output-hk/hydra/issues/997" target="_blank" rel="noopener noreferrer">Update tutorial and include
Mithril #997</a>. The
tutorial is already a bit outdated, this will slim it down and incorporate
Mithril to get the fastest (secure) bootstrap possible of a <code>hydra-node</code>.</p>
</li>
<li>
<p>As a result of focusing on the very concrete use case of payments for mainnet
deployment (and hence 1.0.0 release), multiple items need to (and can) get
reprioritized to match the requirements of this use case.</p>
</li>
</ul>
<p><img decoding="async" loading="lazy" alt="The latest roadmap with features and ideas" src="/assets/images/2023-07-roadmap-389d8b69815010e9969b224281b64e30.png" width="2916" height="1212" class="img_ev3q"> <small><center>The latest roadmap with features and ideas</center></small></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="development">Development<a href="#development" class="hash-link" aria-label="Direct link to Development" title="Direct link to Development">â€‹</a></h2>
<p><a href="https://github.com/input-output-hk/hydra/issues?q=is%3Aclosed+sort%3Aupdated-desc+closed%3A2023-06-22..2023-07-28" target="_blank" rel="noopener noreferrer">Issues and pull requests closed since last report</a></p>
<p>This month, the team worked on the following:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="authenticate-network-messages-727">Authenticate network messages <a href="https://github.com/input-output-hk/hydra/issues/727" target="_blank" rel="noopener noreferrer">#727</a><a href="#authenticate-network-messages-727" class="hash-link" aria-label="Direct link to authenticate-network-messages-727" title="Direct link to authenticate-network-messages-727">â€‹</a></h4>
<p>The Hydra Head protocol paper states:</p>
<blockquote>
<p>Each party then establishes pairwise authenticated channels to all other parties.</p>
</blockquote>
<p><a href="https://eprint.iacr.org/2020/299.pdf" target="_blank" rel="noopener noreferrer">Hydra: Fast Isomorphic State Channels, p.14</a></p>
<p>Guaranteeing the authenticity and integrity of the messages received from one&#x27;s peers is critical to the security of the Head protocol. Initially, we considered deferring this responsibility to the transport layer, for example, leaving it to Hydra node operators to use TLS or other encrypted channels to communicate with their peers. However, this introduced an additional and unnecessary operational burden on operators.</p>
<p>It appeared simple enough to reuse the existing Hydra keys (using Ed25519
curve), which need to be passed to the node, to:</p>
<ul>
<li><em>sign</em> all messages sent to peers</li>
<li><em>verify</em> all messages received from peers</li>
</ul>
<p>The net benefit of this feature is to increase the life expectancy of a head,
preventing some forms of <em>denial of service</em> attacks or wrongly configured nodes
that would lead to a <em>stalled head</em>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="reqsn-only-sends-transaction-ids-728">ReqSn only sends transaction IDs <a href="https://github.com/input-output-hk/hydra/issues/728" target="_blank" rel="noopener noreferrer">#728</a><a href="#reqsn-only-sends-transaction-ids-728" class="hash-link" aria-label="Direct link to reqsn-only-sends-transaction-ids-728" title="Direct link to reqsn-only-sends-transaction-ids-728">â€‹</a></h4>
<p>This feature aligns the current implementation better with the original paper, as it requests snapshots using only the transaction identifiers, rather than the full transactions.</p>
<p>The motivation to implement this feature came from different directions:</p>
<ul>
<li>Improve the performance of the protocol by reducing bandwidth usage</li>
<li>Make it possible to have &#x27;atomic&#x27; transaction sets submitted
(<a href="https://github.com/input-output-hk/hydra/issues/900" target="_blank" rel="noopener noreferrer">#900</a>),</li>
<li>Prevent &#x27;front-running&#x27; from the current leader which, in the previous
implementation, could inject arbitrary (but valid) transactions that peers had
never seen before into a snapshot.</li>
</ul>
<p><code>ReqSn</code>&#x27;s snapshots now contain only the list of transaction IDs and each
hydra-node validates the snapshot by resolving those ideas against the set of
transactions they have seen (through <code>ReqTx</code>). A consequence is that this
introduces the possibility of space leak in the event a submitted valid
transaction never gets included in a snapshot, but this should not be
a problem in practice.</p>
<p>Note that the
<a href="https://hydra.family/head-protocol/core-concepts/specification" target="_blank" rel="noopener noreferrer">specification</a>
has been updated to reflect this change.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="github-security-advisories">GitHub security advisories<a href="#github-security-advisories" class="hash-link" aria-label="Direct link to GitHub security advisories" title="Direct link to GitHub security advisories">â€‹</a></h4>
<p>There was a bug in the multi-signature verification which could compromise
off-chain security of a Hydra Head protocol. Although the fix was quite simple, we
decided to use a new GitHub feature to create the first <a href="https://github.com/input-output-hk/hydra/security/advisories/GHSA-c8qp-cv4h-vcc4" target="_blank" rel="noopener noreferrer">GitHub security
advisory</a>
for Hydra.</p>
<p>The process creates a separate GitHub repository where potential security issues
could be discussed privately (between the reporter and the maintainers) since
potential attackers should not be aware of any issues until they are fixed. The
team scored this issue using CVSS (The Common Vulnerability Scoring System), the
score was moderate (5.5), and they didn&#x27;t request a CVE (Common Vulnerabilities
and Exposures) for this (yet).</p>
<p>The process overall works well, but Hydra CI is not checking the builds in these
private, one-off forks so there is a risk of merging code that doesn&#x27;t compile.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="moving-to-ghc-927-841">Moving to GHC 9.2.7 <a href="https://github.com/input-output-hk/hydra/pull/841" target="_blank" rel="noopener noreferrer">#841</a><a href="#moving-to-ghc-927-841" class="hash-link" aria-label="Direct link to moving-to-ghc-927-841" title="Direct link to moving-to-ghc-927-841">â€‹</a></h4>
<p>GHC 9.2 series have been around for more than a year and the whole Cardano ecosystem is gradually moving to use this new compiler version. Moreover, GHC 8.10.7 does not work reliably on aarch64 architectures, eg Mac M1/M2.</p>
<p>Moving to this new version entailed some significant changes in the code and also in the Plutus scripts:</p>
<table><thead><tr><th>Name</th><th>After (bytes)</th><th>Before (bytes)</th><th>Î”size</th></tr></thead><tbody><tr><td>Î½Initial</td><td>4289</td><td>4621</td><td>- 7%</td></tr><tr><td>Î½Commit</td><td>2124</td><td>2422</td><td>- 12%</td></tr><tr><td>Î½Head</td><td>9185</td><td>8954</td><td>+ 3%</td></tr><tr><td>Î¼Head</td><td>4149</td><td>4458</td><td>-7%</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="community">Community<a href="#community" class="hash-link" aria-label="Direct link to Community" title="Direct link to Community">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hydra-master-class">Hydra master-class<a href="#hydra-master-class" class="hash-link" aria-label="Direct link to Hydra master-class" title="Direct link to Hydra master-class">â€‹</a></h3>
<p>As already mentioned above in our starmap update, we aim to have an educational session at the upcoming Rare Evo event:</p>
<blockquote>
<p>Whether you are building decentralized applications which need to be fast and scale well, or you are creating infrastructure for other builders on Cardano, we will show you how to use Hydra to make your applications and platforms utilize fast off-chain transaction processing via the Hydra Head protocol.</p>
<p>In this session you will learn what Hydra is all about, how to build scalable applications in a live coding session, get to know the hydra-pay and hydra-auction projects, and be guided through exercises to get your hands on these APIs and early SDKs.</p>
</blockquote>
<p>We are currently putting together a detailed outline and will send out
communications on how to register for this exclusive session within the next 1-2
weeks. Stay tuned.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">â€‹</a></h2>
<p>The monthly review meeting for May was held on 2023-07-26 via Google Meet with
these <a href="https://docs.google.com/presentation/d/1CQYAFztRcqofN6sbowg37QuXQ-DQU4NcDmoMghS36B8" target="_blank" rel="noopener noreferrer">slides</a> and here is the <a href="https://drive.google.com/file/d/14ANZ3efuxgXpYK94EBWxZLR9TtN7voru/" target="_blank" rel="noopener noreferrer">recording</a>.</p>
<p>Although we had planned an awesome demo for this month&#x27;s review meeting, showcasing a Hydra head hack without the authenticated messages feature, we encountered some live demo problems (lesson learned: always record a backup!). While we might present it next time, this situation emphasizes the need for continuous improvement in developer and user experiences.</p>
<p>We haven&#x27;t received many questions on our journey to further mature the Hydra software stack to support various use cases building on it. However, the recently kicked-off Catalyst Fund10 sparked a nice discussion on how to handle all these great new ideas while being mindful not to fragment the scaling efforts too much.</p>
<p>Open protocols mean that new ideas can be incorporated not only into the various
code bases, but also in the specification and standards which ensure
interoperability. We discussed means to ensure adherence to standards in a
light-weight agile way and the challenges of educating potential contributors in
specification-driven development.</p>
<p>Next month we&#x27;ll be at RareEvo, but might have the monthly just before in a
hybrid session from Colorado. Until then, we&#x27;ll make Hydra trivial to use and
get started on our new objectives.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/monthly/tags/monthly">monthly</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="This report summarizes the work on Hydra since May 2023. It serves as"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/monthly/2023-06">June 2023</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-06-27T07:53:28.000Z" itemprop="datePublished">June 27, 2023</time> Â· <!-- -->7 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/v0d1ch" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/v0d1ch.png" alt="Sasha Bogicevic" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/v0d1ch" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Sasha Bogicevic</span></a></div><small class="avatar__subtitle" itemprop="description">Senior Software Engineer, IOG</small></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/ch1bo" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/ch1bo.png" alt="Sebastian Nagel" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ch1bo" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Sebastian Nagel</span></a></div><small class="avatar__subtitle" itemprop="description">Software Engineering Lead, IOG</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>This report summarizes the work on Hydra since May 2023. It serves as
preparation for the monthly review meeting (see <a href="https://docs.google.com/presentation/d/1TVzjaFKXBi9DAugSd2L8MSUSZGIU9EjTmwf6yccckPI" target="_blank" rel="noopener noreferrer">slides</a> and
<a href="https://drive.google.com/file/d/1_N6b4RDe579TgLawiJzbE0NLofD3ljE6/view" target="_blank" rel="noopener noreferrer">recording</a>), where the team updates project stakeholders on recent
developments to gather their feedback on proposed plans.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="roadmap">Roadmap<a href="#roadmap" class="hash-link" aria-label="Direct link to Roadmap" title="Direct link to Roadmap">â€‹</a></h2>
<p>While there was no release this month, the team implemented several notable
features, which will be released soon as version 0.11.0:</p>
<p><img decoding="async" loading="lazy" alt="The roadmap without idea items" src="/assets/images/2023-06-roadmap-ex-ideas-9d500c027b6594ce2a53d6158c2146c7.png" width="2372" height="813" class="img_ev3q"> <small><center>The roadmap without idea items</center></small></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="notable-roadmap-updates">Notable roadmap updates<a href="#notable-roadmap-updates" class="hash-link" aria-label="Direct link to Notable roadmap updates" title="Direct link to Notable roadmap updates">â€‹</a></h4>
<ul>
<li>
<p>Realized <a href="https://github.com/input-output-hk/hydra/pull/774" target="_blank" rel="noopener noreferrer">allowing commit txs with multiple UTxO
#774</a> as a dedicated roadmap
item separate from the related <a href="https://github.com/input-output-hk/hydra/issues/215" target="_blank" rel="noopener noreferrer">commit from external wallet
#215</a> (which grew too
big).</p>
</li>
<li>
<p>Revisited <a href="https://github.com/input-output-hk/hydra/issues/186" target="_blank" rel="noopener noreferrer">off-chain performance by doing benchmarks
#186</a>. Identified a
bottleneck, groomed and planned a follow-up performance improvement feature
for <a href="https://github.com/input-output-hk/hydra/issues/913" target="_blank" rel="noopener noreferrer">Event sourced persistence&quot;
#913</a></p>
</li>
<li>
<p>Plan to release 0.11.0 without <a href="https://github.com/input-output-hk/hydra/issues/727" target="_blank" rel="noopener noreferrer">Authenticate network messages
#727</a> to deliver enabling
features earlier.</p>
</li>
<li>
<p>API improvements and exploring batched transactions on L2 showed that <a href="https://github.com/input-output-hk/hydra/issues/728" target="_blank" rel="noopener noreferrer">ReqSN
only sends transaction IDs
#728</a> is in demand,
front-loads further API changes and is estimated to be a low-hanging fruit.</p>
</li>
<li>
<p>Reprioritized items in <code>&lt;= 1.0.0</code> column, to do items with on-chain protocol
impact earlier and not much feedback has been received on snapshotting items. In
fact, if <a href="https://github.com/input-output-hk/hydra/issues/190" target="_blank" rel="noopener noreferrer">Support larger # of UTXO via split-fanout
#190</a> is done slightly
differently, that should avoid some of the problems of impossible to finalize
snapshots.</p>
</li>
</ul>
<p><img decoding="async" loading="lazy" alt="The latest roadmap with features and ideas" src="/assets/images/2023-06-roadmap-6dde45fc909764d6d33f6f1d88b19b23.png" width="3122" height="1082" class="img_ev3q"> <small><center>The latest roadmap with featuresand ideas</center></small></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="development">Development<a href="#development" class="hash-link" aria-label="Direct link to Development" title="Direct link to Development">â€‹</a></h2>
<p><a href="https://github.com/input-output-hk/hydra/issues?q=is%3Aclosed+sort%3Aupdated-desc+closed%3A2023-05-24..2023-06-22" target="_blank" rel="noopener noreferrer">Issues and pull requests closed since last
report</a></p>
<p>This month, the team worked on the following:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="commits-with-multiple-utxo-774">Commits with multiple UTXO <a href="https://github.com/input-output-hk/hydra/pull/774" target="_blank" rel="noopener noreferrer">#774</a><a href="#commits-with-multiple-utxo-774" class="hash-link" aria-label="Direct link to commits-with-multiple-utxo-774" title="Direct link to commits-with-multiple-utxo-774">â€‹</a></h4>
<p>One of the early adopting projects is exploring how to move scripts from layer 1
to layer 2. For that purpose, it was necessary to not only commit the actual
script UTXO, but also a &quot;regular&quot; UTXO holding only ada to be used as collateral
(the <code>cardano-ledger</code> always requires collateral although it would not be
necessary on a layer 2).</p>
<p>To enable this, the specification and on-chain protocol needed updating. Before
a protocol participant could commit zero or one UTXO, which changed now to a
list of UTXO. As the specification is now <a href="/monthly/2023-04#versioned-docs-and-specification">part of the
repository</a>, it could be kept
consistent within the same pull request.</p>
<p>Despite being a <strong>breaking change</strong>, leading to new Hydra script hashes to be
published and used starting with version 0.11.0, this change was surprisingly
easy to do and demonstrated the amenability of the Head protocol and the system
architecture.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="commits-from-external-wallet-215">Commits from external wallet <a href="https://github.com/input-output-hk/hydra/issues/215" target="_blank" rel="noopener noreferrer">#215</a><a href="#commits-from-external-wallet-215" class="hash-link" aria-label="Direct link to commits-from-external-wallet-215" title="Direct link to commits-from-external-wallet-215">â€‹</a></h4>
<p>The team started to mark <em>fuel</em> some time ago as it was an easy workaround to
distinguish UTXOs that can be committed into a head apart from regular outputs
holding ada to pay for fees - the so-called <em>fuel</em>. However, this required users
to &quot;send funds&quot; they want to commit first to the <code>hydra-node</code>s internal wallet
and involved additional steps in tagging such outputs with a special datum hash</p>
<p>To commit from external wallets, a new API endpoint was introduced for the
purpose of <em>drafting</em> a commit transaction. The clients would request such draft
transaction by sending a POST request to <code>/commit</code> and the <code>hydra-node</code> would
respond with a transaction already authorized by the internal wallet. If the
commit involved user funds (empty commits are still possible), then the client
application would need to sign the transaction using the corresponding signing
key. Also, submitting this transaction has shifted from <code>hydra-node</code> to the
client.</p>
<p>This removes direct custody of <code>hydra-node</code> over user funds since clients can
now use whatever key they own, not known to the <code>hydra-node</code>, to do a commit
step and no single <code>hydra-node</code> has access to user funds used in the Head
protocol.</p>
<p>Within this work package, <em>marking fuel</em> became deprecated and all UTXOs owned
by the internal wallet are considered fuel. Fuel marking will be completely
removed in the future. Furthermore, a good old HTTP-based API is now used
for the new query (so far it was only WebSocket-based), which prompts a
potential shift to using OpenAPI as API specification since AsyncAPI does not
describe synchronous requests well.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="benchmark-performance-of-hydra-head-186">Benchmark performance of Hydra Head <a href="https://github.com/input-output-hk/hydra/issues/215" target="_blank" rel="noopener noreferrer">#186</a><a href="#benchmark-performance-of-hydra-head-186" class="hash-link" aria-label="Direct link to benchmark-performance-of-hydra-head-186" title="Direct link to benchmark-performance-of-hydra-head-186">â€‹</a></h4>
<p>Low confirmation time is a key feature of Hydra Head protocol and is
needed for some use cases. The existing end-to-end
benchmarks have been revived and tailored for a <em>baseline scenario</em>, one with a
single hydra-node and a single client. While this scenario is not
representative of target deployments, it&#x27;s interesting as it gives us
an upper bound on the performance of a Hydra Head network.</p>
<p>The results have been somewhat disappointing, and further investigations lead to a few insights:</p>
<ul>
<li>There was a misconfiguration in the RTS of the hydra-node executable
which was therefore not taking advantage of parallelism</li>
<li>We identified the main bottleneck to be persistence of the node&#x27;s
state, which is currently done by overwriting a single file with the
JSON content of the <em>full</em> state on <em>state change</em> which is pretty
inefficient. As a consequence, the team will work on improving the
persistence strategy as described in <a href="https://github.com/input-output-hk/hydra/pull/940" target="_blank" rel="noopener noreferrer">this
ADR</a></li>
<li>More benchmarks:<!-- -->
<ul>
<li>The aforementioned <a href="https://hydra.family/head-protocol/benchmarks/end-to-end-benchmarks" target="_blank" rel="noopener noreferrer">End-to-end benchmarks</a>,</li>
<li><a href="https://hydra.family/head-protocol/benchmarks/ledger" target="_blank" rel="noopener noreferrer">Ledger Micro-benchmarks</a> as a comparison basis.</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="operating-hydra-nodes">Operating hydra nodes<a href="#operating-hydra-nodes" class="hash-link" aria-label="Direct link to Operating hydra nodes" title="Direct link to Operating hydra nodes">â€‹</a></h4>
<p>As a &quot;dogfooding&quot; exercise, the Hydra team is operating a Hydra Head
on mainnet on top of which is running our <code>hydraw</code> application.
The Head protocol got stuck a couple of times and
post-mortem investigations lead to a few improvements in how to
operate a hydra-node and network:</p>
<ul>
<li>Better reporting on the version of executable <code>hydra-node</code> and
<code>hydra-tui</code> which now report the Git SHA1 at which they were built</li>
<li>Reduction in the volume of logs emitted by hydra-node by removing
some chatty network-related logs and using ids to link <code>Begin/End</code>
pairs</li>
<li>Rework the
<a href="https://github.com/input-output-hk/hydra/blob/35f2964ba6d4a780a5f8e669f1afce565a492cec/hydra-cluster/exe/log-filter/Main.hs#L34" target="_blank" rel="noopener noreferrer">log-filter</a>
tool to provide timings for various events and effects keyed by
transactions</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="community">Community<a href="#community" class="hash-link" aria-label="Direct link to Community" title="Direct link to Community">â€‹</a></h2>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="hydra-hackathon--workshop">Hydra hackathon / workshop<a href="#hydra-hackathon--workshop" class="hash-link" aria-label="Direct link to Hydra hackathon / workshop" title="Direct link to Hydra hackathon / workshop">â€‹</a></h4>
<p>The Hydra team is considering holding a workshop at/around Rare Evo at the end
of August and is in contact with the event teams at IOG and the Rare Evo
organizers. The concrete format, scope and agenda is still a bit unclear as we
are contemplating whether to do a workshop/tutorial style or rather a
introduction + challenge setting event. If it does not work out for Rare Evo, we
will find another event or do it ourselves.</p>
<p>If you are reading this and would be interested in joining such an event please
drop us a line on <a href="https://discord.gg/Qq5vNTg9PT" target="_blank" rel="noopener noreferrer">discord</a> or DM
<a href="https://twitter.com/ch1bo_" target="_blank" rel="noopener noreferrer">@ch1bo</a>! Ideally along with some thoughts on
preferred format or what you would be interested in.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="hydra-for-auctions-contributions-and-closing-of-project">Hydra for Auctions contributions and closing of project<a href="#hydra-for-auctions-contributions-and-closing-of-project" class="hash-link" aria-label="Direct link to Hydra for Auctions contributions and closing of project" title="Direct link to Hydra for Auctions contributions and closing of project">â€‹</a></h4>
<p>One of the Hydra lighthouse projects is slowly coming to an end. The
collaboration project between IOG and MLabs on using Hydra for auctions is
currently finalizing documentation and creating demonstration running the whole
thing on a public testnet. Although the demo video was not available at the copy
deadline of this report, watch this space for more about this next
month.</p>
<p>The project yielded multiple github issues containing ideas and sparked great
discussions on improving Hydra like <a href="/monthly/2023-05#hydrozoa-850">reported last
month</a>. It is
also the first project which demonstrates how to move smart contracts from the
layer 1 (L1) to the layer 2 (L2)! Overall it is a great example of establishing
crucial state on L1 and achieving scalability through Hydra as L2.</p>
<p>The code is fully open source and available on Github
<a href="https://github.com/mlabs-haskell/hydra-auction/" target="_blank" rel="noopener noreferrer">hydra-auction</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">â€‹</a></h2>
<p>The monthly review meeting for May was held on 2023-06-21 via Google Meet with
these <a href="https://docs.google.com/presentation/d/1TVzjaFKXBi9DAugSd2L8MSUSZGIU9EjTmwf6yccckPI" target="_blank" rel="noopener noreferrer">slides</a> and here is the <a href="https://drive.google.com/file/d/1_N6b4RDe579TgLawiJzbE0NLofD3ljE6/view" target="_blank" rel="noopener noreferrer">recording</a>.</p>
<p>It was a fairly straight-forward month and consequently unexciting review meeting
this month. Unfortunately, we could not release 0.11.0 yet, but we wanted to get
the quite significant change of supporting commits from external wallets done
first. This feature in particular was more involved than expected, but as the
demonstration in the meeting showed, we are in the final stages of getting this
over the line.</p>
<p>Besides some nice findings to potential performance improvements for layer 2
transaction processing, there was not much to announce this time around. Behind
the scenes, however, there have been great progress on the Hydra for Payments
project and the next updates are going to be more interesting again.</p>
<p>Despite holiday season approaching, we will march on, steadily adding features
and enabling more and more use cases to scale through Hydra.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/monthly/tags/monthly">monthly</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="This report summarizes the work on Hydra since April 2023. It serves as"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/monthly/2023-05">May 2023</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-05-30T14:30:18.000Z" itemprop="datePublished">May 30, 2023</time> Â· <!-- -->9 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/ch1bo" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/ch1bo.png" alt="Sebastian Nagel" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ch1bo" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Sebastian Nagel</span></a></div><small class="avatar__subtitle" itemprop="description">Software Engineering Lead, IOG</small></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/pgrange" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/pgrange.png" alt="Pascal Grange" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/pgrange" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Pascal Grange</span></a></div><small class="avatar__subtitle" itemprop="description">Senior Software Engineer, IOG</small></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/ffakenz" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/ffakenz.png" alt="Franco Testagrossa" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ffakenz" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Franco Testagrossa</span></a></div><small class="avatar__subtitle" itemprop="description">Senior Software Engineer, IOG</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>This report summarizes the work on Hydra since April 2023. It serves as
preparation for the monthly review meeting (see <a href="https://docs.google.com/presentation/d/1anUC3Z1idloyR6uwiSHLZtV6-LQvUcByHPMUgCBOVIA" target="_blank" rel="noopener noreferrer">slides</a> and
<a href="https://drive.google.com/file/d/1_N6b4RDe579TgLawiJzbE0NLofD3ljE6/view" target="_blank" rel="noopener noreferrer">recording</a>), where the team updates project stakeholders on recent
developments to gather their feedback on proposed plans.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="roadmap">Roadmap<a href="#roadmap" class="hash-link" aria-label="Direct link to Roadmap" title="Direct link to Roadmap">â€‹</a></h2>
<p>This month the team released version 0.10.0 which includes many important features.
The project <a href="https://github.com/orgs/input-output-hk/projects/21" target="_blank" rel="noopener noreferrer">roadmap</a> was
only slightly updated this month and already saw one more feature completed:</p>
<p><img decoding="async" loading="lazy" alt="The roadmap without idea items" src="/assets/images/2023-05-roadmap-ex-ideas-190169ec27dae76ae437be73558443c0.png" width="2133" height="752" class="img_ev3q">
<small><center>The roadmap without idea items</center></small></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="release-0100">Release 0.10.0<a href="#release-0100" class="hash-link" aria-label="Direct link to Release 0.10.0" title="Direct link to Release 0.10.0">â€‹</a></h4>
<ul>
<li>
<p>First mainnet compatible release of <code>hydra-node</code> including technical changes and documentation</p>
</li>
<li>
<p>Mainnet exposure currently limited to 100â‚³ per participant</p>
</li>
<li>
<p>Added some missing features to the client API (short-term solutions)</p>
</li>
<li>
<p>Some quality of life improvements in running the <code>hydra-node</code></p>
</li>
<li>
<p><a href="https://github.com/input-output-hk/hydra/releases/tag/0.10.0" target="_blank" rel="noopener noreferrer">Full release notes</a> and a list of <a href="https://github.com/input-output-hk/hydra/milestone/8?closed=1" target="_blank" rel="noopener noreferrer">delivered features</a></p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="notable-roadmap-updates">Notable roadmap updates<a href="#notable-roadmap-updates" class="hash-link" aria-label="Direct link to Notable roadmap updates" title="Direct link to Notable roadmap updates">â€‹</a></h4>
<ul>
<li>
<p>Got new input and a concrete scenario for benchmarking (off-chain) performance
of a Hydra head. As it is a very basic one, we moved the item from an
idea to a feature and started work on it.</p>
</li>
<li>
<p>Added a new feature item to add Hydra as a tool to developer platforms within our agenda of <a href="/monthly/2023-01#themes-for-2023">promoting Hydra as an open-source platform</a> for scalability on Cardano.</p>
</li>
<li>
<p>Already completed a first feature for 0.11.0 and considering whether to release it as
early as possible with latest advances.</p>
</li>
</ul>
<p><img decoding="async" loading="lazy" alt="The latest roadmap with features and ideas" src="/assets/images/2023-05-roadmap-a6eb7e109a1fe9a3beff03ac1824762b.png" width="2421" height="1112" class="img_ev3q"> <small><center>The latest roadmap with features and ideas</center></small></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="development">Development<a href="#development" class="hash-link" aria-label="Direct link to Development" title="Direct link to Development">â€‹</a></h2>
<p><a href="https://github.com/input-output-hk/hydra/issues?q=is%3Aclosed+sort%3Aupdated-desc+closed%3A2023-04-26..2023-05-24" target="_blank" rel="noopener noreferrer">Issues and pull requests closed since last
report</a></p>
<p>This month, the team worked on the following:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="timed-transactions-196">Timed transactions <a href="https://github.com/input-output-hk/hydra/issues/196#" target="_blank" rel="noopener noreferrer">#196</a><a href="#timed-transactions-196" class="hash-link" aria-label="Direct link to timed-transactions-196" title="Direct link to timed-transactions-196">â€‹</a></h4>
<p>To realize the Hydra Head protocol, a <code>hydra-node</code> observes and follows the
chain progress on the layer 1 (L1). Until now, this component was only observing
protocol related transactions. Now, on every block roll forward, a <code>Tick</code> event
carrying the notion of time from L1 is observed by the <code>hydra-node</code> and is used
to validate transactions in a Hydra head. This means that clients can submit
time bounded transactions to an open head and expect them to be validated using
the same slot that would be used on L1. It is important to mention that time
only advances on L1 when a block is produced.</p>
<p><img decoding="async" loading="lazy" alt="Timed transactions in a Hydra Head state channel" src="/assets/images/2023-05-timed-transactions-a2a620ded97818a461ae1a1a3caa3388.jpg" width="1609" height="970" class="img_ev3q"> <small><center>Timed transactions in a Hydra Head state channel</center></small></p>
<p>This feature will make the Hydra L2 ledger now en-par with UTXO features
available on the Cardano L1. A logical next step in this direction could be to
make time in the state channel advance every configured <code>slotLength</code> (e.g. every
second) using the system clock in between blocks as a form of <a href="https://en.wikipedia.org/wiki/Dead_reckoning" target="_blank" rel="noopener noreferrer">dead reckoning</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="removing---ledger-genesis-863">Removing --ledger-genesis <a href="https://github.com/input-output-hk/hydra/pull/863" target="_blank" rel="noopener noreferrer">#863</a><a href="#removing---ledger-genesis-863" class="hash-link" aria-label="Direct link to removing---ledger-genesis-863" title="Direct link to removing---ledger-genesis-863">â€‹</a></h4>
<p>The hydra-node had two command line options to configure the ledger used for validating layer 2 (L2) transactions: <code>--ledger-protocol-parameters</code> and <code>--ledger-genesis</code>. The former option, which is self-explanatory, allows configuration of the Cardano protocol parameters to be used. Often, the same parameters as those on L1 are configured, or similar parameters with reduced fees, for example. On the other hand, the second option required the <code>genesis-shelley.json</code> file previously used to initialize the Shelley era by the cardano-node.</p>
<p>When we started using the current slot in the L2 ledger (see above), we realized
that only the start time and slot length are effectively used from that
configuration file. Moreover, it would be quite surprising if those were
different and slots would be longer or shorter on L2 (unless explicitly
configured). We opted to remove the option altogether and have the <code>hydra-node</code>
fetch the genesis parameters from the Cardano network. This makes the system
easier to configure and more isomorphic to L1.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="improving-ci-runtime">Improving CI runtime<a href="#improving-ci-runtime" class="hash-link" aria-label="Direct link to Improving CI runtime" title="Direct link to Improving CI runtime">â€‹</a></h4>
<p>The Hydra project <a href="https://hydra.family/head-protocol/adr/12" target="_blank" rel="noopener noreferrer">embraces Test Driven Development</a> and implements
<a href="https://github.com/input-output-hk/hydra/actions/workflows/ci-nix.yaml" target="_blank" rel="noopener noreferrer">Continuous
Integration</a>
(CI), checking all these tests pass and more.</p>
<p>The CI could sometimes take as long as an hour or
more to run, which has a negative impact on the project&#x27;s workflow.
For instance, all the project&#x27;s branches have to be <a href="https://github.com/input-output-hk/hydra/wiki/Coding-Standards#merge-prs-with-merge-commits-and-rebase-branches-on-top-of-master" target="_blank" rel="noopener noreferrer">fast-forward with
master</a>
before being merged.
So if all the tests on a branch are green and the pull request has been
approved but is lagging a bit behind master, it has to be rebased, so the
CI has to run again, incurring a one hour or so delay in this case before
being able to merge it. The situation becomes worse when several pull requests
are <em>ready</em> to be merged.</p>
<p>Analyzing the run from <a href="https://github.com/input-output-hk/hydra/actions/runs/4933005294" target="_blank" rel="noopener noreferrer">May, 10th</a>
we can see that:</p>
<ul>
<li>Building and testing takes 19 minutes for the longest</li>
<li>Generating haddock documentation and running the benchmarks takes 28 minutes
for the longest</li>
<li>Documentation (which will need artifacts generated in previous steps) will take
14 minutes</li>
<li>In total, this run took 1 hour and 16 minutes.</li>
</ul>
<p>Let&#x27;s focus on the build and the testing stage first. We&#x27;re expecting the
plutus-merkle-tree to run fast but <a href="https://github.com/input-output-hk/hydra/actions/runs/4933005294/jobs/8816564512" target="_blank" rel="noopener noreferrer">it took 8 minutes and 52
seconds</a>
, 7m and 11 seconds being spent setting up the build environment.
In other words, 81% of the build time is downloading binary dependencies from some nix cache.</p>
<p>Compiling the code requires cabal and other nix dependencies that will trigger
massive downloads. Instead, let&#x27;s, straight on, run the tests with nix and let
nix decide what needs to be compiled. Sometimes, most of the code will not have
changed and the test binary will already be available in some nix cache to be run
without any compilation step.</p>
<p>This has been done in <a href="https://github.com/input-output-hk/hydra/pull/867" target="_blank" rel="noopener noreferrer">#867</a>.
Merging this PR, the <a href="https://github.com/input-output-hk/hydra/actions/runs/5003046049" target="_blank" rel="noopener noreferrer">build on master took 45
minutes</a> and,
specifically, the same <a href="https://github.com/input-output-hk/hydra/actions/runs/5003046049/jobs/8963773583" target="_blank" rel="noopener noreferrer">plutus-merkle-tree
job</a>
only took 1 minute and 44 seconds, only 20% of the time observed before.</p>
<p>Then, let&#x27;s focus on documentation (14 minutes). Most of the time spent by this
process is website optimization. It makes sense for the documentation that will
actually be published on the website (master or release). But what about all
the builds in branches for which the website will never be published?
We need to keep this documentation step in branches because it gives us sanity
checks, preventing broken links, for instance. But we can definitely remove the
optimization step.</p>
<p>This has been done in <a href="https://github.com/input-output-hk/hydra/pull/880" target="_blank" rel="noopener noreferrer">#880</a>
and it <a href="https://github.com/input-output-hk/hydra/actions/runs/5067084637/jobs/9098252031" target="_blank" rel="noopener noreferrer">saves 10 minutes</a>
from this step.</p>
<p>Our first goal was to reduce CI execution time when pushing
on branches and this has been improved. We&#x27;re now having execution time
significantly under 30 minutes where it used to be 45 minutes or even an hour.</p>
<p>We had some issues with compilation output, obfuscated by nix, which have been
solved by <a href="https://github.com/input-output-hk/hydra/pull/889" target="_blank" rel="noopener noreferrer">#889</a>.</p>
<p>Every morning, we rebuild our master branch and we can observe the whole
execution time on the following graph (in seconds):</p>
<p><img decoding="async" loading="lazy" alt="CI perf" src="/assets/images/2023-05-ci-perf-6f40f4793f448feae776a3e87c1c4d59.png" width="1942" height="1142" class="img_ev3q"> <small><center>C.I. execution total execution time</center></small></p>
<p>Although we observed performance improvements on branches CI execution time,
master execution time has not been reduced that much. We may save 10 minutes
from the documentation step because optimizing the <em>unstable</em> documentation is
maybe not worthwhile.
But what&#x27;s more problematic here is the process variability.</p>
<p>This variability can be explained by nix cache misses. That&#x27;s something we need
to investigate. It&#x27;s hard to optimize a process with buffers, especially here
where in case of a cache miss, recompilation has to happen and takes time.
So every cache miss introduces several minutes of overhead which explains why we
observe so much variation between two days with this master execution time.</p>
<p>Next steps:</p>
<ul>
<li>Inspect why we have an unexpected random cache miss</li>
<li>Improve haddock generation time (15 minutes)</li>
<li>Reduce bench time (we probably don&#x27;t want to run the whole benchmark suite for
every single commit, or a smaller one)</li>
<li>Focus on the changed area (do not compile everything to generate the monthly
report)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="community">Community<a href="#community" class="hash-link" aria-label="Direct link to Community" title="Direct link to Community">â€‹</a></h2>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="hydrozoa-850">Hydrozoa <a href="https://github.com/input-output-hk/hydra/discussions/850" target="_blank" rel="noopener noreferrer">#850</a><a href="#hydrozoa-850" class="hash-link" aria-label="Direct link to hydrozoa-850" title="Direct link to hydrozoa-850">â€‹</a></h4>
<p>This month, the project saw a new kind of contribution from the community.
@GeorgeFlerovsky has written a research piece about an adaptation of the
(Coordinated) Hydra Head protocol into a new flavor - Hydrozoa. The article is
currently being examined and <a href="https://github.com/input-output-hk/hydra/discussions/850" target="_blank" rel="noopener noreferrer">discussed on
GitHub</a>. Feedback so
far has been positive. Of course, one does not simply change the Hydra Head
protocol (pun intended), but the ideas contained could drive evolution and
be followed up with concrete protocol extensions. Very much like the ideas
presented in the original paper.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="hydra-for-payments-project-update">Hydra for Payments project update<a href="#hydra-for-payments-project-update" class="hash-link" aria-label="Direct link to Hydra for Payments project update" title="Direct link to Hydra for Payments project update">â€‹</a></h4>
<p>In this collaborative effort between IOG and ObsidianSystems, we are pushing the
frontiers of using Hydra in payment use cases. It will lower the entry barrier
for developers and ultimately users to leverage Hydra L2 for sending
and receiving ada and Cardano native assets with very low fees and sub-second
finality.</p>
<p>The project is in its second phase where the open-source
<a href="https://github.com/obsidiansystems/hydra-pay" target="_blank" rel="noopener noreferrer">hydra-pay</a> library is being
expanded with necessary features while the team pushes for building a
dedicated mobile application.</p>
<p>With the recently released hydra-pay version
<a href="https://github.com/obsidiansystems/hydra-pay/releases/tag/v0.2.0" target="_blank" rel="noopener noreferrer">0.2.0</a>, an
end-to-end workflow of the Android App nicknamed &quot;HydraNow&quot; can be realized.
This app will act as a layer 2 wallet quite like a Bitcoin Lightning Wallet and
drives feature development in both <code>hydra-pay</code> and <code>hydra</code> in the background.</p>
<p><img decoding="async" loading="lazy" alt="Two instances of HydraNow (in browser) connected via a hydra-pay channel" src="/assets/images/2023-05-hydra-now-a33a097233ff47e7cf2ccfc064abdd7f.png" width="3216" height="1572" class="img_ev3q"> <small><center>Two instances of HydraNow (in browser) connected via a hydra-pay channel</center></small></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="spanish-translation">Spanish translation<a href="#spanish-translation" class="hash-link" aria-label="Direct link to Spanish translation" title="Direct link to Spanish translation">â€‹</a></h4>
<p>Last, but not least, we would like to thank @Agustinblockchain for their
contribution of a <a href="https://github.com/input-output-hk/hydra/pull/866" target="_blank" rel="noopener noreferrer">Spanish translation #866</a>
of the <a href="https://hydra.family/head-protocol/unstable/es/" target="_blank" rel="noopener noreferrer">hydra.family website</a> ðŸ‡ªðŸ‡¸ ðŸŽ‰</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">â€‹</a></h2>
<p>The monthly review meeting for May was held on 2023-05-24 via Google Meet with
these <a href="https://docs.google.com/presentation/d/1anUC3Z1idloyR6uwiSHLZtV6-LQvUcByHPMUgCBOVIA" target="_blank" rel="noopener noreferrer">slides</a> and here is the <a href="https://drive.google.com/file/d/1_N6b4RDe579TgLawiJzbE0NLofD3ljE6/view" target="_blank" rel="noopener noreferrer">recording</a>.</p>
<p>The monthly review meeting was lively and we had stakeholders from IOG as well
as interested community members join. They were well served by two very nice
demos shown by ObsidianSystems and IOG teams.</p>
<p>After having dealt with some issues last month, we are happy to have
the first mainnet-capable version released and have already another feature
completed this month.</p>
<p>It is great to see that more and more contributors from the community are
stepping up to become advocates of the technology. A community is forming and we
realize that the project could need some help from someone dedicated to keep
track of all the great things happening. What a great problem to have!</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/monthly/tags/monthly">monthly</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="This report summarizes the work on Hydra since March 2023. It serves as"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/monthly/2023-04">April 2023</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-05-03T06:45:42.000Z" itemprop="datePublished">May 3, 2023</time> Â· <!-- -->9 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/ch1bo" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/ch1bo.png" alt="Sebastian Nagel" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ch1bo" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Sebastian Nagel</span></a></div><small class="avatar__subtitle" itemprop="description">Software Engineering Lead, IOG</small></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/abailly-iohk" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/abailly-iohk.png" alt="Arnaud Bailly" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/abailly-iohk" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Arnaud Bailly</span></a></div><small class="avatar__subtitle" itemprop="description">Lead Architect, IOG</small></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/v0d1ch" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/v0d1ch.png" alt="Sasha Bogicevic" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/v0d1ch" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Sasha Bogicevic</span></a></div><small class="avatar__subtitle" itemprop="description">Senior Software Engineer, IOG</small></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/pgrange" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/pgrange.png" alt="Pascal Grange" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/pgrange" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Pascal Grange</span></a></div><small class="avatar__subtitle" itemprop="description">Senior Software Engineer, IOG</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>This report summarizes the work on Hydra since March 2023. It serves as
preparation for the monthly review meeting (see
<a href="https://docs.google.com/presentation/d/10wZJy0tyGMbvMihbHnHk0QByA_TAZrtbcRbf5Gd-SHg/" target="_blank" rel="noopener noreferrer">slides</a>
and the
<a href="https://drive.google.com/file/d/1X4yPerLTatPPMrX3RYS7XH9lfT_LYaaX/view?usp=sharing" target="_blank" rel="noopener noreferrer">recording</a>),
where the team updates major project stakeholders on recent developments to
gather their feedback on proposed plans.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="roadmap">Roadmap<a href="#roadmap" class="hash-link" aria-label="Direct link to Roadmap" title="Direct link to Roadmap">â€‹</a></h2>
<p>The project <a href="https://github.com/orgs/input-output-hk/projects/21" target="_blank" rel="noopener noreferrer">roadmap</a> was
only slightly updated this month:</p>
<p><img decoding="async" loading="lazy" src="/assets/images/2023-04-roadmap-d86dcb7d087f91df1d2f7d8bc87fdd23.png" width="2827" height="1111" class="img_ev3q"> <small><center>The latest roadmap with features and ideas</center></small></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="notable-roadmap-updates">Notable roadmap updates<a href="#notable-roadmap-updates" class="hash-link" aria-label="Direct link to Notable roadmap updates" title="Direct link to Notable roadmap updates">â€‹</a></h4>
<ul>
<li>
<p>There are still many ðŸ’­ <strong>idea</strong> items on the roadmap, however, not on the
current and next planned release columns. The process involves clarifying and
refining each idea item into a ðŸ’¬ <strong>feature</strong> before starting work on it. This
includes giving equal consideration to new user ðŸ’­ <strong>idea</strong>s and requests.</p>
</li>
<li>
<p>Temporarily postponed the <a href="https://github.com/input-output-hk/hydra/issues/696" target="_blank" rel="noopener noreferrer">Hydra heads explorer
#696</a> item until there is
more clarity. While there aren&#x27;t any major blockers,the explorer just requires
further detailing, especially since we&#x27;re currently in talks with existing
Cardano explorer platforms.</p>
</li>
<li>
<p>Converted the <a href="https://github.com/input-output-hk/hydra/issues/193" target="_blank" rel="noopener noreferrer">aggregated multi-signature
#193</a> from the concrete
roadmap into an <a href="https://github.com/input-output-hk/hydra/discussions/787" target="_blank" rel="noopener noreferrer">idea discussion
#787</a>. This is based
on feedback from the community, and we believe that discussing it there would
be more beneficial.</p>
</li>
<li>
<p>The main focus for the 0.10.0 release is implementing mainnet compatibility.
This is mostly done and only requires some documentation and disclaimer
updates. We&#x27;re about to release 0.10.0, which will be the first
mainnet-compatible version.</p>
</li>
<li>
<p>Meanwhile, work on the <a href="https://github.com/input-output-hk/hydra/issues/380" target="_blank" rel="noopener noreferrer">configurable API
#380</a> was completed,
which gave rise to new ideas and follow-up feature requests from users. One of
them (<a href="https://github.com/input-output-hk/hydra/issues/823" target="_blank" rel="noopener noreferrer">Add HeadState/Snapshot to Greetings
#823</a>) was fairly
straightforward and necessary to deliver a consistent, usable increment on the
API with the upcoming release.</p>
</li>
<li>
<p>Prioritized <a href="https://github.com/input-output-hk/hydra/issues/196" target="_blank" rel="noopener noreferrer">Support timed transactions
#196</a> higher as yet
another use case would benefit from this.</p>
</li>
</ul>
<p><img decoding="async" loading="lazy" src="/assets/images/2023-04-roadmap-ex-ideas-28efc0211737e7b74b8c8d4c05c681c9.png" width="2133" height="1014" class="img_ev3q"> <small><center>The roadmap without idea items</center></small></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="development">Development<a href="#development" class="hash-link" aria-label="Direct link to Development" title="Direct link to Development">â€‹</a></h2>
<p><a href="https://github.com/input-output-hk/hydra/issues?q=is%3Aclosed+sort%3Aupdated-desc+closed%3A2023-03-29..2023-04-26" target="_blank" rel="noopener noreferrer">Issues and pull requests closed since last
report</a></p>
<p>This month, the team worked on the following:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="configurable-api">Configurable API<a href="#configurable-api" class="hash-link" aria-label="Direct link to Configurable API" title="Direct link to Configurable API">â€‹</a></h4>
<p>The API evolved a bit, driven by the issues our users reported
<a href="https://github.com/input-output-hk/hydra/issues/823" target="_blank" rel="noopener noreferrer">#823</a>
<a href="https://github.com/input-output-hk/hydra/issues/813" target="_blank" rel="noopener noreferrer">#813</a>
<a href="https://github.com/input-output-hk/hydra/issues/800" target="_blank" rel="noopener noreferrer">#800</a>
<a href="https://github.com/input-output-hk/hydra/issues/789" target="_blank" rel="noopener noreferrer">#789</a>. Related changes
were added to the API server so now our clients can:</p>
<ul>
<li>Control the historical messages output. History messages can be displayed
upon re/connection or not depending on client needs.</li>
<li>Snapshot UTXOs can optionally be disabled.</li>
<li>Transactions can be displayed in CBOR or JSON format.</li>
</ul>
<p>Our clients can also have a nice insight into the current Hydra node state and head UTXOs
that are now displayed as part of a <code>Greetings</code> message.</p>
<p>Next steps on the API level are to further fulfill user needs by grooming and
implementing needed changes related to filtering, pagination etc.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="versioned-docs-and-specification">Versioned docs and specification<a href="#versioned-docs-and-specification" class="hash-link" aria-label="Direct link to Versioned docs and specification" title="Direct link to Versioned docs and specification">â€‹</a></h4>
<p>Over the <a href="/monthly/2023-02#development">last couple of months</a> the Hydra
specification became an important artifact to use in discussion, review and
potential audit of the Hydra Head protocol implementation. The document was now
moved from overleaf into the Hydra repository, where it is properly versioned
and built on each CI run. Changes can be proposed using our regular pull request
workflow and the final PDF is built and <a href="https://hydra.family/head-protocol/unstable/core-concepts/specification" target="_blank" rel="noopener noreferrer">published to the
website</a>
automatically.</p>
<p>Note that the above link points to the new <code>/unstable</code> version of the
documentation, which holds the bleeding edge user manual, specification and
API reference (which got a new sidebar) built directly from <code>master</code>. The
normal, non-unstable version of the website is always referring to the <a href="https://github.com/input-output-hk/hydra/releases" target="_blank" rel="noopener noreferrer">last
released version</a>.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/2023-04-specification-c62e215ae68896ec86ea6e51aa2ccd76.png" width="1365" height="751" class="img_ev3q"> <small><center>Specification on the Hydra website</center></small></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="fixed-scripts-plutonomy-and-custom-script-contexts">Fixed scripts, Plutonomy and custom script contexts<a href="#fixed-scripts-plutonomy-and-custom-script-contexts" class="hash-link" aria-label="Direct link to Fixed scripts, Plutonomy and custom script contexts" title="Direct link to Fixed scripts, Plutonomy and custom script contexts">â€‹</a></h4>
<p>As we made the specification use a more direct way to represent transactions
(instead of the constraint emitting machine formalism), we realized that our
scripts are not correctly ensuring <em>script continuity</em>. We identified these
&#x27;gaps&#x27; as red sections (see above) in the specification and worked on fixing
them.</p>
<p>While the <a href="https://github.com/input-output-hk/hydra/pull/777" target="_blank" rel="noopener noreferrer">actual fix #777</a>
was fairly straightforward and could easily be covered by our mutation-based
contract tests, the script size increased and we could not publish all three
Hydra scripts in a single publish transaction (which allows for a single
<code>--hydra-scripts-tx-id</code> parameter on the <code>hydra-node</code>).</p>
<p>To mitigate this, we looked into the UPLC optimizer
<a href="https://github.com/well-typed/plutonomy/tree/master/src/Plutonomy" target="_blank" rel="noopener noreferrer">Plutonomy</a>.
Applying it was fairly simple, our tests did also pass, script sizes <em>and
costs</em> also became lower. But, script size does not matter so much as we are
using reference scripts and using a (not really maintained?) optimizer which
introduces yet another question mark after compilation from <code>plutus-tx</code> to
<code>uplc</code> was not our cup of tea right now at least (and we might pull this out
of the drawer later).</p>
<p>There is an alternative: decoding <code>ScriptContext</code> involves quite some code,
but we don&#x27;t need everything in all validators. So we introduced a
customscript context that only decodes the fields we need.</p>
<table><thead><tr><th>scripts</th><th>@0.9.0</th><th>fixes</th><th>fixes + plutonomy</th><th>fixes + custom ScriptContext</th></tr></thead><tbody><tr><td>Î½Initial</td><td>4621</td><td>4727</td><td>3672</td><td>4300</td></tr><tr><td>Î½Commit</td><td>2422</td><td>2513</td><td>1816</td><td>2068</td></tr><tr><td>Î½Head</td><td>8954</td><td>9492</td><td>7579</td><td>9456 (no custom SC)</td></tr><tr><td>Î¼Head</td><td>4458</td><td>4537</td><td>3468</td><td>4104</td></tr></tbody></table>
<p>As part of this process, we also updated dependencies #<a href="https://github.com/input-output-hk/hydra/pull/826" target="_blank" rel="noopener noreferrer">826</a> to the latest
<code>cardano-node</code> master. Although it didn&#x27;t have an impact on script sizes, it&#x27;s a
crucial step towards preparing for upcoming hard-forks.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="rollback-bug-hunt">Rollback bug hunt<a href="#rollback-bug-hunt" class="hash-link" aria-label="Direct link to Rollback bug hunt" title="Direct link to Rollback bug hunt">â€‹</a></h4>
<p>Opening our first head on mainnet failed. We didn&#x27;t
lose any funds, except for some fees, but the head just did not open.
Exploring the logs, we figured out that a rollback happened while opening the
head and there was a bug.</p>
<p>This is our test pyramid. It already contained some tests about the rollback but
we decided to enrich our model-based tests to simulate rollbacks (before that,
it used to run on a <em>perfect</em> blockchain). You can find more about our
model-based test strategy in <a href="https://engineering.iog.io/2022-09-28-introduce-q-d/" target="_blank" rel="noopener noreferrer">Model-Based Testing with
QuickCheck</a>.</p>
<p><img decoding="async" loading="lazy" alt="test pyramid" src="/assets/images/2023-04-test-pyramide-d76808e09459750072e15c10a660a09d.png" width="2048" height="1418" class="img_ev3q"> <small><center>Testing pyramid</center></small></p>
<p>The new property
<a href="https://github.com/input-output-hk/hydra/blob/commit_vs_rollback/hydra-node/test/Hydra/ModelSpec.hs#L185" target="_blank" rel="noopener noreferrer">headOpensIfAllPartiesCommit</a>
helped prove the issue. At the end of the day, the problem came from a
concurrency issue introduced while implementing <a href="https://hydra.family/head-protocol/adr/18" target="_blank" rel="noopener noreferrer">ADR 18</a>.</p>
<p>In the figure below, the <code>DirectChain</code> processes a new block, updating the
<code>chainState</code> stored inside the <code>headState</code>. This also leads to an event being
published to some event queue. Later, the <code>HeadLogic</code> (called <em>Node</em> in the
picture) will process this event, updating the <code>headState</code>.</p>
<p>At the end of the process, we can see that the new <code>headState</code> points to a
<code>previousRecoverableState</code> which contains the same <code>chainState</code>, <code>chainState 1</code>
instead of <code>chainState 0</code>. If a rollback then happens, the <code>headState</code> will be
reverted to this <code>previousRecoverableState</code> and the fact that it contains
<code>chainState 1</code> instead of <code>chainState 0</code> makes some on-chain observations
impossible.</p>
<p><img decoding="async" loading="lazy" alt="Race condition" src="/assets/images/2023-04-race-condition-734c42e231ebc340c1c72e4014aeb691.png" width="1412" height="915" class="img_ev3q"> <small><center>Race condition</center></small></p>
<p>This explains the issue we had when opening our head:</p>
<ol>
<li>a commit A is observed on-chain;</li>
<li>a rollback happens so that the headState <em>forgets</em> about this commit but not
the <code>chainState</code> (remember, it&#x27;s the wrong <code>chainState</code>);</li>
<li>the commit is observed again on the chain but ignored by the <code>chainState</code> (because
it has already seen it, it just ignores it);</li>
<li>the <code>headState</code> will never hear about this commit again and so will never open
the head, waiting forever for the missing commit.</li>
</ol>
<p>We decided to implement the following solution:</p>
<ul>
<li>A local chain state is re-introduced in the chain component, not shared with
the head logic.</li>
<li>A copy of the chain state is kept in the head state to keep the benefits of
ADR <a href="https://hydra.family/head-protocol/adr/18" target="_blank" rel="noopener noreferrer">18</a> regarding persistence.</li>
<li>The rollback event is removed from the API until <a href="https://github.com/input-output-hk/hydra/issues/185" target="_blank" rel="noopener noreferrer">#185</a>.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="possible solution" src="/assets/images/2023-04-possible-solution-1b4bc4a476389bd660fa06cc182bc26b.png" width="1597" height="956" class="img_ev3q"> <small><center>Possible solution</center></small></p>
<p>Rollback management is quite a tricky business. It might be the case that we&#x27;ve
tried to be a bit too smart. So we&#x27;re doing a rollback in our way of handling
rollbacks until we focus on this topic again when dealing with this roadmap item:
<a href="https://github.com/input-output-hk/hydra/issues/185" target="_blank" rel="noopener noreferrer">Handle rollbacks II</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="community">Community<a href="#community" class="hash-link" aria-label="Direct link to Community" title="Direct link to Community">â€‹</a></h2>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="hydra-for-voting">Hydra for Voting<a href="#hydra-for-voting" class="hash-link" aria-label="Direct link to Hydra for Voting" title="Direct link to Hydra for Voting">â€‹</a></h4>
<p>The project is advancing and a basic vote tallying scenario in the Catalyst use
case was demonstrated in the review meeting. The project is driving the API
discussions as it is not using any Haskell tooling, but an application in Java
with Aiken as the validator scripting language. Besides the catalyst use case,
other scenarios like the ballot voting for the summit are also explored now.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="hydra-for-auctions">Hydra for Auctions<a href="#hydra-for-auctions" class="hash-link" aria-label="Direct link to Hydra for Auctions" title="Direct link to Hydra for Auctions">â€‹</a></h4>
<p>A new demo was recorded in the wake of an upcoming Twitter space discussing
auctions and NFT marketplaces with the community. The feature set currently
includes starting the auction on L1, bidding on L1 or (and this is the novel
thing!) transferring the auction from L1 to L2, such that it can be bid on L2.</p>
<div style="position:relative;padding-bottom:56.25%;height:0"><iframe src="https://www.loom.com/embed/7ed84e37d65748d994d8a0be147f7ecb" frameborder="0" style="position:absolute;top:0;left:0;width:100%;height:100%"></iframe></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="kupo-x-hydra">Kupo x Hydra<a href="#kupo-x-hydra" class="hash-link" aria-label="Direct link to Kupo x Hydra" title="Direct link to Kupo x Hydra">â€‹</a></h4>
<p>In a good old pairing session between IOG and CF engineers, the integration of
Kupo with Hydra was explored. This seems to be promising and work started <a href="https://github.com/CardanoSolutions/kupo/pull/117" target="_blank" rel="noopener noreferrer">here
kupo#117</a>. This will make it
possible to run <code>kupo</code> natively connected to a <code>hydra-node</code>, very much it would
run with <code>cardano-node</code> or <code>ogmios</code>. Kupo is a lightweight indexer of chain data
like unspent transaction outputs and allows its clients to query information
on-demand. ðŸ¹</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cbia-meetings">CBIA meetings<a href="#cbia-meetings" class="hash-link" aria-label="Direct link to CBIA meetings" title="Direct link to CBIA meetings">â€‹</a></h4>
<p>Hydra Team is now a regular participant to <a href="https://www.cbia.io/" target="_blank" rel="noopener noreferrer">Cardano Blockchain Infrastructure
Alliance</a> meetings which happen more or less on a monthly
basis. Hydra was featured during the meetup that happened while the team was on
a <a href="/monthly/2023-03">workshop in Feldkirch</a> and through this participation we
hope to contribute to growth of the Cardano eco-system and position Hydra as a
key infrastructure for builders.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="twitter-space-on-scaling-cardano">Twitter space on scaling Cardano<a href="#twitter-space-on-scaling-cardano" class="hash-link" aria-label="Direct link to Twitter space on scaling Cardano" title="Direct link to Twitter space on scaling Cardano">â€‹</a></h4>
<p>This month we took part in a Twitter space about scaling Cardano and how Hydra
can contribute to this. Thanks for conducting this
<a href="https://twitter.com/thepizzaknight_" target="_blank" rel="noopener noreferrer">@thepizzaknight_</a> ðŸ™</p>
<a href="https://twitter.com/i/spaces/1vOxwMVDaXLGB"><p><img decoding="async" loading="lazy" src="/assets/images/2023-04-twitter-space-d7f42586519d5d7f7c6bc89405b06cd4.png" width="708" height="258" class="img_ev3q"></p></a>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">â€‹</a></h2>
<p>The monthly review meeting for April was held on 2023-04-26 via Google Meet with
these
<a href="https://docs.google.com/presentation/d/10wZJy0tyGMbvMihbHnHk0QByA_TAZrtbcRbf5Gd-SHg/" target="_blank" rel="noopener noreferrer">slides</a>
and here is the
<a href="https://drive.google.com/file/d/1X4yPerLTatPPMrX3RYS7XH9lfT_LYaaX/view?usp=sharing" target="_blank" rel="noopener noreferrer">recording</a>.</p>
<p>Although it has been a busy month we could not cut a release, unfortunately.</p>
<p>We&#x27;ve experienced several setbacks due to the commits vs. rollbacks bug and oversized script sizes, which have slowed down our progress. Additionally, the back and forth on the API, which at times required creative and unconventional solutions, has also been time-intensive. However, we view this feedback as <strong>incredibly</strong> valuable, as it will ultimately make hydra-node more user-friendly and capable, albeit through a step-by-step process.</p>
<p>Associated projects in the greater Hydra community are moving ahead nicely
due to the collaborative approach and tight loops of interaction between the
individual teams.</p>
<p>All things considered, the project can be considered on track. We are very close to cutting our first mainnet-compatible release and the rising number of user
requests and interested developers are good indicators that Hydra adoption
is increasing.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/monthly/tags/monthly">monthly</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="This report summarizes the work on Hydra since February 2023. It serves as"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/monthly/2023-03">March 2023</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-04-04T13:15:50.000Z" itemprop="datePublished">April 4, 2023</time> Â· <!-- -->6 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/ffakenz" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/ffakenz.png" alt="Franco Testagrossa" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ffakenz" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Franco Testagrossa</span></a></div><small class="avatar__subtitle" itemprop="description">Senior Software Engineer, IOG</small></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/v0d1ch" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/v0d1ch.png" alt="Sasha Bogicevic" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/v0d1ch" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Sasha Bogicevic</span></a></div><small class="avatar__subtitle" itemprop="description">Senior Software Engineer, IOG</small></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/ch1bo" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/ch1bo.png" alt="Sebastian Nagel" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ch1bo" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Sebastian Nagel</span></a></div><small class="avatar__subtitle" itemprop="description">Software Engineering Lead, IOG</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>This report summarizes the work on Hydra since February 2023. It serves as
preparation for the monthly review meeting
(<a href="https://docs.google.com/presentation/d/1yZ4AqUQ8OBMG9ARMYvj3IOjaIAqglf7kZei4vsLMrbs/edit#slide=id.g1f87a7454a5_0_1392" target="_blank" rel="noopener noreferrer">slides</a>/<a href="https://www.youtube.com/watch?v=mA9lMV0tKN8" target="_blank" rel="noopener noreferrer">recording</a>)
, where the team updates major project stakeholders on recent developments to
gather their feedback on proposed plans.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="roadmap">Roadmap<a href="#roadmap" class="hash-link" aria-label="Direct link to Roadmap" title="Direct link to Roadmap">â€‹</a></h2>
<p>The project saw one release this month and several items on our
<a href="https://github.com/orgs/input-output-hk/projects/21" target="_blank" rel="noopener noreferrer">roadmap</a> were updated.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="released-version-090">Released version 0.9.0<a href="#released-version-090" class="hash-link" aria-label="Direct link to Released version 0.9.0" title="Direct link to Released version 0.9.0">â€‹</a></h4>
<ul>
<li>
<p>This release brought in on-chain and off-chain changes that are now also fully
reflected in our specification.</p>
</li>
<li>
<p>We managed to decrease the costs of our plutus scripts by using a new error code
framework and made also the head script a reference script.</p>
</li>
<li>
<p>The mutation test suite is improved. Now, if tests fail they show the correct reason.</p>
</li>
<li>
<p>The contestation deadline is now pushed out by each contesting party, so the
contestation period parameter can be chosen irrespective of number of parties.</p>
</li>
<li>
<p>Added a tutorial contributed by <a href="https://github.com/perturbing/" target="_blank" rel="noopener noreferrer">@perturbing</a>.</p>
</li>
<li>
<p><a href="https://github.com/input-output-hk/hydra/releases/tag/0.9.0" target="_blank" rel="noopener noreferrer">Full release notes</a> and list of <a href="https://github.com/input-output-hk/hydra/milestone/9?closed=1" target="_blank" rel="noopener noreferrer">delivered features</a></p>
</li>
</ul>
<p><img decoding="async" loading="lazy" src="/assets/images/2023-03-roadmap-0dbb5851443550bdeea79e517480eed0.png" width="1873" height="609" class="img_ev3q"> <small><center>The latest roadmap, with many items marked as idea.</center></small></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="notable-roadmap-updates">Notable roadmap updates<a href="#notable-roadmap-updates" class="hash-link" aria-label="Direct link to Notable roadmap updates" title="Direct link to Notable roadmap updates">â€‹</a></h4>
<ul>
<li>
<p>Now that 0.9.0 is released, the focus is on mainnet compatibility. The
next planned version <strong>0.10.0</strong> will be the first <code>hydra-node</code> to be
mainnet compatible.</p>
</li>
<li>
<p>Also prioritized <a href="https://github.com/input-output-hk/hydra/issues/380" target="_blank" rel="noopener noreferrer">API configurability
#380</a> higher and planned
it into 0.10.0 as more users were requesting this.</p>
</li>
<li>
<p>We aim for several more <strong>0.x.0</strong> versions to incorporate user-requested
features before reaching a 1.0.0, which will be a fully maintained release
where features can be considered stable and won&#x27;t be removed without
appropriate deprecation cycles.</p>
</li>
<li>
<p>Marked multiple features as ðŸ’­ <em>idea</em>, meaning they are up for discussion.
Many have been on the roadmap for a long time without user demand or input,
while other ideas are incubating as <a href="https://github.com/input-output-hk/hydra/discussions/categories/ideas" target="_blank" rel="noopener noreferrer">github idea
discussion</a>.
We are planning to convert these idea issues to GitHub discussions as these
provide better discussion tools and allow to gauge interest in topics. In turn,
by cleaning up we provide more room for the most popular ideas to be planned
onto the roadmap in a more timely manner.</p>
</li>
<li>
<p>In short, if you want to see some feature added, <strong>show your support</strong> on the
corresponding <a href="https://github.com/input-output-hk/hydra/discussions/categories/ideas" target="_blank" rel="noopener noreferrer">idea
discussion</a>.</p>
</li>
<li>
<p>The ðŸ’¬ <em>feature</em> items remaining are the currently identified &quot;must-haves&quot; or
too vague to remove ðŸ”´ <em>red</em> items.</p>
</li>
</ul>
<p><img decoding="async" loading="lazy" src="/assets/images/2023-03-roadmap-ex-ideas-780befa80ce4acd0270b5952637d2265.png" width="1778" height="749" class="img_ev3q"> <small><center>The roadmap without idea items.</center></small></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="development">Development<a href="#development" class="hash-link" aria-label="Direct link to Development" title="Direct link to Development">â€‹</a></h2>
<p><a href="https://github.com/input-output-hk/hydra/issues?q=is%3Aclosed+sort%3Aupdated-desc+closed%3A2023-02-24..2023-03-29" target="_blank" rel="noopener noreferrer">Issues and pull requests closed since last
report</a></p>
<p>This month, the team worked on the following:</p>
<ul>
<li>
<p><strong>Making Hydra mainnet compatible.</strong> Besides making it technically possible to
run on mainnet, this is about safeguarding our users and preventing them from
shooting themselves in the foot with a mainnet gun. That is why we
<a href="https://github.com/input-output-hk/hydra/issues/762" target="_blank" rel="noopener noreferrer">limited</a> the amount of
ada you can commit to a head on mainnet. Our smoke tests should be running on
mainnet also so we made sure to
<a href="https://github.com/input-output-hk/hydra/pull/770" target="_blank" rel="noopener noreferrer">return</a> the leftover funds
back to our faucet. There was also
<a href="https://github.com/input-output-hk/hydra/pull/775" target="_blank" rel="noopener noreferrer">work</a> on our CI that
enables running the tests on mainnet using a dedicated github runner.</p>
</li>
<li>
<p><strong>Improving the Hydra UX.</strong> We noticed a possible pitfall when restarting the
<code>hydra-node</code> using different parameters than in the persisted state. Now, the
node would <a href="https://github.com/input-output-hk/hydra/issues/764" target="_blank" rel="noopener noreferrer">prevent</a> this
kind of misconfiguration.</p>
</li>
<li>
<p><strong>Optimize the on-chain scripts.</strong> Reduced the cost of opening/closing a Head
by reducing size of scripts via error codes
<a href="https://github.com/input-output-hk/hydra/pull/748" target="_blank" rel="noopener noreferrer">#748</a> and also having the
head script as a reference only
<a href="https://github.com/input-output-hk/hydra/pull/701" target="_blank" rel="noopener noreferrer">#701</a>).</p>
<p>The mutation test also got improved by making all cases expect the
corresponding error codes
<a href="https://github.com/input-output-hk/hydra/issues/705" target="_blank" rel="noopener noreferrer">#705</a> and new <a href="https://github.com/input-output-hk/hydra/pull/772" target="_blank" rel="noopener noreferrer">golden
test suite </a> ensures the
script hashes don&#x27;t change accidentally.</p>
<p>Furthermore, we addressed a problem discovered in our property tests
<a href="https://github.com/input-output-hk/hydra/pull/724" target="_blank" rel="noopener noreferrer">#724</a> by preventing
committing outputs with reference scripts to a Head
<a href="https://github.com/input-output-hk/hydra/pull/766" target="_blank" rel="noopener noreferrer">#766</a>. This is still a
documented known issue, but a workaround is available.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="community">Community<a href="#community" class="hash-link" aria-label="Direct link to Community" title="Direct link to Community">â€‹</a></h2>
<ul>
<li>
<p><strong>Team workshop in Austria.</strong> Meetup of core contributors in Feldkirch,
Austria for retrospective, grooming and discussions on future plans for
Hydra. Part of the agenda was also a presentation of Hydra to members of the
Cardano Foundation and a meeting with builders from the Cardano community.</p>
<p>The highlight, though was the common effort of going the last mile to open a
head on mainnet for the monthly review meeting! ðŸŽ‰</p>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">JUST IN: We have a Hydra Head live on the <a href="https://twitter.com/hashtag/Cardano?src=hash&amp;ref_src=twsrc%5Etfw">#Cardano</a> Mainnet ðŸš€ <a href="https://t.co/6kDKq7T7no">pic.twitter.com/6kDKq7T7no</a></p>â€” Emmanuel ð“‚€ ðŸ• ð“…“ðŸ‡¬ðŸ‡­ðŸ¦„ðŸŸ£âš¡ï¸ (@thepizzaknight_) <a href="https://twitter.com/thepizzaknight_/status/1638572527789252608?ref_src=twsrc%5Etfw">March 22, 2023</a></blockquote>
<script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>We demonstrated our good old <code>hydraw</code> application on that Hydra head and we
saw thousands of pixels painted by hundreds of users (no detailed metrics).</p>
</li>
<li>
<p><strong>Next step in Hydra for Payments.</strong> Also announced in the monthly meeting was
the next phase on the Hydra for Payments project. The scope of this will be to
extend hydra-pay and build a mobile payment channels app that makes direct use
of it - working title: HydraNow.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">â€‹</a></h2>
<p>The monthly review meeting for March was conducted on 2023-03-27 via Google
Meet - <a href="https://docs.google.com/presentation/d/1yZ4AqUQ8OBMG9ARMYvj3IOjaIAqglf7kZei4vsLMrbs/edit#slide=id.g1f87a7454a5_0_1392" target="_blank" rel="noopener noreferrer">slides</a>/<a href="https://www.youtube.com/watch?v=mA9lMV0tKN8" target="_blank" rel="noopener noreferrer">recording</a>.</p>
<p>This month was very important for the project and culminated in the first
demonstration of a Hydra Head on mainnet! The demo was well received and we
received positive feedback in the meeting, on following twitter announcements
and on the published recording on youtube. Inspired by this, we saw multiple
people offer to help and collaborate on communicating, educating and ultimately
spreading the love. The invitation via the new discord category worked well - we
had about 40 community members in the call - and we will continue with this
workflow. Make sure to follow the Hydra
<a href="https://discord.gg/Bwdy2jNdm2" target="_blank" rel="noopener noreferrer">#announcements</a> on the IOG Technical discord
server.</p>
<p>While being mainnet compatible is a major milestone for the project, there are
still many known issues, shortcomings and requested features. The roadmap
changes this month should make it clear that we are serious about the latter -
Hydra will only reach 1.0.0 if it is used by an application on mainnet. Hence,
we will focus on adding features required for payments, voting, auctions, ...
and eventually, your use case.</p>
<p>Hydra Head is ready to be used on mainnet. Are you ready to use it?</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/monthly/tags/monthly">monthly</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="This report summarizes the work on Hydra since January 2023. It serves as"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/monthly/2023-02">February 2023</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-03-02T07:26:29.000Z" itemprop="datePublished">March 2, 2023</time> Â· <!-- -->7 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/ch1bo" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/ch1bo.png" alt="Sebastian Nagel" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ch1bo" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Sebastian Nagel</span></a></div><small class="avatar__subtitle" itemprop="description">Software Engineering Lead, IOG</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>This report summarizes the work on Hydra since January 2023. It serves as
preparation for the monthly review meeting, where the teams update major project
stakeholders on recent developments to gather their feedback on proposed plans.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="roadmap">Roadmap<a href="#roadmap" class="hash-link" aria-label="Direct link to Roadmap" title="Direct link to Roadmap">â€‹</a></h2>
<p>Looking at the <a href="https://github.com/orgs/input-output-hk/projects/21" target="_blank" rel="noopener noreferrer">roadmap</a>,
there are a few things that changed this month:</p>
<ul>
<li>
<p>In general, there will be several items in flux as we align the technical
roadmap to support our high-level objectives for the year.</p>
<ul>
<li>New items for example: <a href="https://github.com/input-output-hk/hydra/issues/710" target="_blank" rel="noopener noreferrer">create a use case-centric roadmap
#710</a> and <a href="https://github.com/input-output-hk/hydra/issues/693" target="_blank" rel="noopener noreferrer">open
specification with change process
#693</a>.</li>
</ul>
</li>
<li>
<p>Also note that we have not had a release in a while and we want to have
smaller faster releasable items again.</p>
</li>
<li>
<p><a href="https://github.com/input-output-hk/hydra/issues/452" target="_blank" rel="noopener noreferrer">Aligning implementation with HeadV1 specification
#452</a> was more work than
anticipated. There was quite some back and forth with the writing of the
specification and discussions with researchers leading to scope creep.<br>
<!-- -->Most importantly, we made on-chain behavior consistent with specification.</p>
<ul>
<li>Follow-ups for some off-chain protocol logic:<!-- -->
<ul>
<li><a href="https://github.com/input-output-hk/hydra/issues/727" target="_blank" rel="noopener noreferrer">Authenticate network messages
#727</a></li>
<li><a href="https://github.com/input-output-hk/hydra/issues/728" target="_blank" rel="noopener noreferrer">ReqSn only sends transaction ids
#728</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p>Version <strong>0.9.0</strong> will be the first release to be developed against a full
technical specification. We expect a release in early March.</p>
</li>
<li>
<p>Version <strong>0.10.0</strong> will be the first mainnet compatible release. For this, we
created and groomed the main feature item <a href="https://github.com/input-output-hk/hydra/issues/713" target="_blank" rel="noopener noreferrer">Mainnet compatibility
#713</a>:</p>
<ul>
<li>Not only making it technically compatible but also adding guard rails to
limit risk (â€œnot shoot yourself in the foot .. with a real gun nowâ€) and
documenting known issues.</li>
</ul>
</li>
<li>
<p>For a fully maintained version <strong>1.0.0</strong> we still need to address some things,
but we aim for an increased rate of planned releases in the next months as we
march toward it.</p>
</li>
</ul>
<p><img decoding="async" loading="lazy" src="/assets/images/2023-02-roadmap-3d107488f95a55e129b4835610d70076.png" width="3119" height="1086" class="img_ev3q"> <small><center> The latest roadmap with multiple
new items and starting to reflect Hydra objectives of 2023.</center></small></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="development">Development<a href="#development" class="hash-link" aria-label="Direct link to Development" title="Direct link to Development">â€‹</a></h2>
<p><a href="https://github.com/input-output-hk/hydra/issues?q=is%3Aclosed+sort%3Aupdated-desc+closed%3A2023-01-24..2023-02-28" target="_blank" rel="noopener noreferrer">Issues and pull requests closed since last
report</a></p>
<p>This month, the team worked on the following:</p>
<ul>
<li>
<p><strong>Aligning specification and implementation</strong>. This major <a href="https://github.com/input-output-hk/hydra/issues/452" target="_blank" rel="noopener noreferrer">feature
item</a> was the topic we
worked on over the last couple of months. This time we could finish the major,
must-have parts and can continue now on other features. Notable things from
this month were:</p>
<p><strong>Pushing out contestation deadlines:</strong> The original paper defined that all
participants need to be contesting within the contestation period (after
close, before the deadline). In discussions with researchers last year, we
identified better semantics: the contestation deadline gets &quot;pushed out&quot; on
each contest. This has the benefit that the period needs to only accommodate
the minimum time required to get a single contest transaction into the
blockchain. Before it was depending on the size of the Hydra head - each
participant can contest once.</p>
<p><strong>Align off-chain protocol logic:</strong> While most concerns addressed were about
the on-chain scripts of the Hydra protocol, this is about the layer two
protocol logic. That is, which messages are exchanged between Hydra nodes and
how a node reacts to them. Here we realized that the implementation was
slightly different from the formalism used in the paper and specification.
This makes it non-obvious whether the behavior is exactly as specified or
whether the specification can even be implemented into a working system.</p>
<p>To clarify this, we put in some effort to align the implementation with the
specification and the other way around. This allowed us to reason through our
behavior tests whether the protocol as specified is sound as well. Below you
see an excerpt of the Haskell code against the LaTeX pseudocode formalism:</p>
<center><img src="/assets/images/2023-02-logic-haskell-cd9e1b7595a0048c6e8e550c0a47042f.png" style="width:310px"><img src="/assets/images/2023-02-logic-latex-027405f2f4b083633399b58497b8fa77.png" style="width:250px"></center>
</li>
<li>
<p><strong>Profiling Hydra transactions.</strong> We will want to maximize the capability of
the Hydra Head protocol. This includes writing the on-chain scripts
efficiently. Besides having <a href="https://hydra.family/head-protocol/benchmarks/transaction-cost/" target="_blank" rel="noopener noreferrer">transaction cost
benchmarks</a>,
we worked on a profiling workflow for Hydra protocol transactions and
published a <a href="https://hydra.family/head-protocol/benchmarks/profiling" target="_blank" rel="noopener noreferrer">tutorial on the Hydra
website</a>. This allows
any contributor to <a href="https://github.com/input-output-hk/hydra" target="_blank" rel="noopener noreferrer">Hydra</a> to
profile the scripts used in these transactions and identify code that uses a
lot of the memory or CPU budget in flame graphs like this:</p>
<p><img decoding="async" loading="lazy" src="/assets/images/2023-02-profile-mem-1962b88f74167af737797653b64ca737.svg" width="1200" height="342" class="img_ev3q"> [Interactive]Head not closable/limiting
script size discussion + acceptance property</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="community">Community<a href="#community" class="hash-link" aria-label="Direct link to Community" title="Direct link to Community">â€‹</a></h2>
<ul>
<li>
<p><strong>Audit guidelines.</strong> Hydra is an open-source project and, as such, should be
freely used, reviewed and audited. The goal of audits and peer reviews is to
increase confidence in the security of a system. However, conducting an audit
is also very expensive and not in the scope of our current budget. All the
while, the worth of an audit is not the same to all users, some will not even
trust an audit they have not paid for themselves, while others do not care at
all and would blindly trust the word of the maintainers.</p>
<p>While the Hydra project continues to seek for funding to eventually pay for an
audit of the protocol specification and the <code>hydra-node</code> implementation, it is
a prerequisite that the necessary artifacts for such an audit exist. As we
have been creating them in recent months, we also worked on guidelines for
auditors, now <a href="https://hydra.family/head-protocol/audit-guidelines/" target="_blank" rel="noopener noreferrer">published on our
website</a>. These
guidelines should serve as a starting point and scope description of what
would be most crucial to audit.</p>
</li>
<li>
<p><strong>New tutorial.</strong> This month we received a great contribution from
<a href="https://github.com/perturbing/" target="_blank" rel="noopener noreferrer">@perturbing</a>, who created an <a href="https://hydra.family/head-protocol/docs/tutorial/" target="_blank" rel="noopener noreferrer">end-to-end
tutorial</a> on using a
<code>hydra-node</code> and opening a Hydra head on the testnet. We gladly adopted this
tutorial and aim to keep it up to date with upcoming versions of the
<code>hydra-node</code>. It will provide a great starting point for new users and makes
the project more approachable. Thanks! <!-- -->ðŸ’š</p>
</li>
<li>
<p><strong>Hydra for Payments demo.</strong> As we are about to kick off the next phase of the
payments use case with Obsidian Systems, they demonstrated the use of
<a href="https://github.com/obsidiansystems/hydra-pay" target="_blank" rel="noopener noreferrer">hydra-pay</a> in a new
backoffice-like view, listing multiple payment channels and providing a great
teaser of using payment channels for pay-per-use APIs or cashback use cases
(micro-transactions).</p>
<p><img decoding="async" loading="lazy" src="/assets/images/2023-02-payment-channels-02c368c8c8eac729f02666cf0363ab71.png" width="1466" height="917" class="img_ev3q"></p>
</li>
<li>
<p><strong>Hydra for Voting.</strong> The project with Catalyst and Cardano Foundation on
voting with Hydra (or rather <em>tallying</em> with Hydra) showed some progress. They
have <a href="https://github.com/aiken-lang/trees/pull/1" target="_blank" rel="noopener noreferrer">contributed Merkle Trees to
Aiken</a>, which will be useful to
prove the correct tallying of votes in the L2. They started work on a
<a href="https://github.com/cardano-foundation/hydra-java-client" target="_blank" rel="noopener noreferrer">hydra-java-client</a>
and provided valuable feedback on the <code>hydra-node</code> API over the last month.</p>
</li>
<li>
<p><strong>Hydra on Demeter.</strong> The folks from <a href="https://github.com/txpipe" target="_blank" rel="noopener noreferrer">@txpipe</a> have
been working on integrating Hydra into their platform-as-a-service offering,
Demeter. This is a great way to get started with running a <code>hydra-node</code> as a
service and we plan on integrating one instance into our long-running hydraw
demo. It&#x27;s still not fully released, but the teams are working together to
make this integration great. Thanks for providing this service! <!-- -->ðŸ’š</p>
</li>
<li>
<p><strong>New discord category.</strong> The Hydra project will be using Discord a bit more
in the coming weeks and months. For that, a new category on the <a href="https://discord.gg/Bwdy2jNdm2" target="_blank" rel="noopener noreferrer">IOG Technical
Discord server</a> has been created. Look out for
news and, most importantly, invites for the next month&#x27;s review meeting in the
new Hydra #announcements channel!</p>
<div style="display:flex"><img src="/assets/images/2023-02-discord-fea5adbeb6ded88bb79eac021b0a00a9.png" style="width:300px;margin:0 auto"></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">â€‹</a></h2>
<p>The monthly review meeting for February was conducted on 2023-02-27 via Google
Meet -
<a href="https://docs.google.com/presentation/d/1FjLvlLS4Qh6dwuULFJxielvemDGi-xiWZ2o6wysJk7U/edit#slide=id.g1f87a7454a5_0_1392" target="_blank" rel="noopener noreferrer">slides</a>
/
<a href="https://drive.google.com/file/d/15l5F5NJNO1aC4X8HdQUDsg_dKMgVCO-J/view?usp=sharing" target="_blank" rel="noopener noreferrer">recording</a>.</p>
<p>This month&#x27;s installment featured two demos, one about the Hydra Payment
channels, and another about the progress on the Hydra for Auctions project. It
was great to showcase not only core development progress on the specification
and protocol implementation in the <code>hydra-node</code>, but also to see contributions
from the Community on tutorials and tooling (Demeter integration).</p>
<p>An exciting, but also challenging next step will be to aim for mainnet
compatibility and at the same time deliver quick releases to enable these
lighthouse projects and the increasing number of use cases explored by the
builders of Cardano.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/monthly/tags/monthly">monthly</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="This report summarizes the work on Hydra since December 2022. It serves as"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/monthly/2023-01">January 2023</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-01-26T11:32:23.000Z" itemprop="datePublished">January 26, 2023</time> Â· <!-- -->6 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/ch1bo" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/ch1bo.png" alt="Sebastian Nagel" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ch1bo" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Sebastian Nagel</span></a></div><small class="avatar__subtitle" itemprop="description">Software Engineering Lead, IOG</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>This report summarizes the work on Hydra since December 2022. It serves as
preparation for the monthly review meeting, where the teams update major project
stakeholders on recent developments to gather their feedback on the proposed
plan forward.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="roadmap">Roadmap<a href="#roadmap" class="hash-link" aria-label="Direct link to Roadmap" title="Direct link to Roadmap">â€‹</a></h2>
<p>Looking at the <a href="https://github.com/orgs/input-output-hk/projects/21" target="_blank" rel="noopener noreferrer">roadmap</a>,
there are just a few things to report this month:</p>
<ul>
<li>
<p>Regroomed <a href="https://github.com/input-output-hk/hydra/issues/448" target="_blank" rel="noopener noreferrer">Create updated specification for coordinated head protocol
#448</a> to <!-- -->ðŸ’›<!-- -->,
as good progress was made on the specification</p>
</li>
<li>
<p>Marked <a href="https://github.com/input-output-hk/hydra/issues/452" target="_blank" rel="noopener noreferrer">Align implementation with HeadV1 protocol specification
#452</a> as <!-- -->ðŸ”´<!-- -->, as
the team experienced scope creep and has not progressed as fast as expected.</p>
<ul>
<li>The plan is to break this initiative into smaller tasks to address and
explain implementation challenges.</li>
</ul>
</li>
</ul>
<p><img decoding="async" loading="lazy" src="/assets/images/2023-01-roadmap-d445b3f9b76a572928bb5b6b3e404442.png" width="3122" height="982" class="img_ev3q"> <small><center> The latest roadmap with minor
changes, which needs a reflection of the latest objectives. </center></small></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="development">Development<a href="#development" class="hash-link" aria-label="Direct link to Development" title="Direct link to Development">â€‹</a></h2>
<p><a href="https://github.com/input-output-hk/hydra/issues?q=is%3Aclosed+sort%3Aupdated-desc+closed%3A2022-12-23..2023-01-24" target="_blank" rel="noopener noreferrer">Issues closed since last
report</a></p>
<p>This month, the team worked on the following:</p>
<ul>
<li>
<p><strong>First write-up of Hydra spec online</strong>. The team has been aggregating the
latest definitions of on- and off-chain semantics into a new technical
specification. The latest version can still be found <a href="https://www.overleaf.com/project/6389ba5edbcf7a51fda1328f" target="_blank" rel="noopener noreferrer">on
Overleaf</a>, before
its integration into the core Hydra repository. Should you have feedback,
please send it our way through one of the <a href="https://github.com/input-output-hk/hydra/blob/master/SUPPORT.md" target="_blank" rel="noopener noreferrer">communication
channels</a>.</p>
</li>
<li>
<p><strong>Closed more gaps in the Head Contract.</strong> The team addressed two more gaps in
the on-chain scripts based on discussions on the specification.</p>
<ul>
<li>
<p>All validators are authenticated now and ensure contract continuity by
checking for the state tokens in the output (or getting burned).</p>
</li>
<li>
<p>Abort now fully reimburses all committed UTXOs, even if two parties would
have committed the exact same output (quite a theoretical attack vector).</p>
</li>
</ul>
<p>This work is captured in
<a href="https://github.com/input-output-hk/hydra/issues/452" target="_blank" rel="noopener noreferrer">#452</a>, but this work
item is taking quite a bit longer than expected. Also, it&#x27;s a single feature
item, lacking some rationale on certain requirements, so we intend to break
this down into smaller pieces over the next days and weeks.</p>
</li>
<li>
<p><strong>Mutation test framework improvements.</strong> While closing gaps in the contracts,
the team realized that some of the <a href="https://hydra.family/head-protocol/haddock/hydra-node/tests/Hydra-Chain-Direct-Contract-Mutation.html" target="_blank" rel="noopener noreferrer">mutation
tests</a>
were correctly tripping validators and making transactions invalid, but not
always for the right reason. In fact, some of the mutations were â€˜too harshâ€™
and made the even transaction not even pass phase-1 validation. The team
addressed this by introducing a first (naiive) way to assert the right cause
of the failure by checking strings in the validator log.
<a href="https://github.com/input-output-hk/hydra/pulls/679" target="_blank" rel="noopener noreferrer">#679</a></p>
</li>
<li>
<p><strong>Add <code>headId</code> in API and TUI.</strong> The team not only added the unique <code>headId</code>
to the appropriate server outputs and the TUI
<a href="https://github.com/input-output-hk/hydra/pull/678" target="_blank" rel="noopener noreferrer">#678</a>, but also added
sequence numbers and timestamps to produced outputs
<a href="https://github.com/input-output-hk/hydra/pull/618" target="_blank" rel="noopener noreferrer">#618</a>. This feature was
asked for by users and simplifies identifying of heads and integration with
the hydra-node.</p>
</li>
<li>
<p><strong>Hydra explorer experiment.</strong> Some of the team used the holiday season to
conduct some experiments on summarizing Hydra Heads observed on a network.
This quick hack already demonstrates the value of a Hydra explorer as a tool
to measure adoption by open heads on a given network. Naturally, it would
reuse code from the hydra-node and challenge the architecture used in it for
tracking multiple heads. Also, it will drive discussion about the versioning
of hydra-plutus and the possibility to track multiple versions of the Hydra
protocol on the chain (hashes/addresses change in each version).</p>
</li>
</ul>
<p><img decoding="async" loading="lazy" src="/assets/images/2023-01-explorer-051813ee8b3a4cac21ca35d6ba2f83d0.png" width="2765" height="801" class="img_ev3q"> <small><center> Hydra explorer first experiment
UI </center></small></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="community">Community<a href="#community" class="hash-link" aria-label="Direct link to Community" title="Direct link to Community">â€‹</a></h2>
<ul>
<li>
<p><strong>The Hydra for Voting project</strong>, which got kicked off in December is picking
up steam with deep dives into Catalyst voting and Hydra technology.
Discussions are currently held in various settings and the team is continuing
to develop a picture of what is achievable.</p>
</li>
<li>
<p><strong>Hydra for auctions lite paper</strong>. IOG is collaborating with MLabs on
exploring how Hydra can improve auction use cases. At this stage, the teams
discussed multiple approaches on structuring the problem space with various
Hydra topologies and specific trade-offs. The full case study was published
<a href="https://www.essentialcardano.io/article/implementing-auction-projects-using-hydra" target="_blank" rel="noopener noreferrer">on Essential
Cardano</a>.
The teams plan to upstream the findings back into the <a href="https://hydra.family/head-protocol/use-cases/nft-auction/" target="_blank" rel="noopener noreferrer">use case
section</a> on the
Hydra website from which this project originated.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="themes-for-2023">Themes for 2023<a href="#themes-for-2023" class="hash-link" aria-label="Direct link to Themes for 2023" title="Direct link to Themes for 2023">â€‹</a></h2>
<p>After kicking off planning in a <a href="/monthly/2022-11#cardano-summit--workshop">workshop</a> and reflecting on <a href="https://cardanofoundation.org/en/news/hydra-head-protocol-an-open-source-solution-for-scalability/" target="_blank" rel="noopener noreferrer">what Hydra achieved in 2023</a>, the team has progressed in fleshing out relevant themes and objectives for this year to position Hydra as a sustainable open-source project in the age of Voltaire:</p>
<ul>
<li>
<p><strong>A mainnet mature application</strong></p>
<ul>
<li><strong>Why?</strong> The core contributors should be able to use the protocol on
mainnet, so it should be maintainable and mature enough to lock some ada in
a Hydra Head using a reference DApp (eg, hydraw). By creating and growing
this DApp, the team will
<a href="https://en.wikipedia.org/wiki/Eating_your_own_dog_food" target="_blank" rel="noopener noreferrer">dogfood</a> features
and hence improve additional usability.</li>
<li><strong>How to measure?</strong> Number of heads on mainnet &gt; 0 and core contributors
feel confident to lock at least 100â‚³ in a Hydra Head on mainnet.</li>
<li><strong>Next steps:</strong>
<ul>
<li>Publish Hydra Head V1 specification</li>
<li>Close gaps in implementation and release 0.9.0</li>
<li>Create a request for proposals (RFP) to audit the specification and its
implementation</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Increase adoption</strong></p>
<ul>
<li><strong>Why?</strong> The team wants to showcase what is possible with Hydra through
benchmarks and lighthouse projects, enabling use cases and reducing friction
to use Hydra. Also, ensuring interoperability through open standards and
reference implementations.</li>
<li><strong>How to measure?</strong> Number of third-party created heads on any network &gt; 0</li>
<li><strong>Next steps:</strong>
<ul>
<li>Build a basic Hydra Head explorer to measure adoption</li>
<li>Benchmark off-chain performance (of a selected scenario)</li>
<li>Demonstrate Hydra for payments to potential users</li>
<li>Support Hydra for voting project</li>
<li>Hydra for auctions project exploring a delegated voucher auction</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Sustainable open-source-development</strong></p>
<ul>
<li><strong>Why?</strong> The team wants to scale Cardano in the long run. Hence this project
should not be owned by a single entity, but by the community and the Cardano
network itself. It is thus essential to make contributions to the project
possible and ultimately it should be easy to become a contributor.</li>
<li><strong>How to measure?</strong> Number of contributors on GitHub</li>
<li><strong>Next steps:</strong>
<ul>
<li>Open up monthly reviews</li>
<li>Add tutorials to the website</li>
<li>Publish and maintain a use-case-centric roadmap and feature map</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">â€‹</a></h2>
<p>This monthly review was the first public one with not only stakeholders from IOG
and the CF, but also collaborators of the latest projects. This was the first
step to a more open and transparent development process.</p>
<p>The teams showed some classic demos â€“ like the â€˜hydrawâ€™ application which has
been running on the same Hydra Head for four weeks now â€“ and some new
developments on the Hydra explorer and minor improvements to hydra-node API and
TUI.</p>
<p>It was very interesting to bring various teams together to exchange ideas and
thoughts on the individual roadmaps for the new year. The teams also shared the
relevant themes and objectives of the Hydra project for 2023 (as also listed
above). They will now make sure to reflect these steps into this concrete
<a href="https://github.com/orgs/input-output-hk/projects/21" target="_blank" rel="noopener noreferrer">roadmap</a> such that it will
contain <a href="https://www.agilealliance.org/glossary/mmf/" target="_blank" rel="noopener noreferrer">marketable features</a>
bringing us closer to these goals.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/monthly/tags/monthly">monthly</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="This report summarizes the work on Hydra since November 2022 and also serves as"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/monthly/2022-12">December 2022</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-01-09T08:43:30.000Z" itemprop="datePublished">January 9, 2023</time> Â· <!-- -->4 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/ch1bo" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/ch1bo.png" alt="Sebastian Nagel" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ch1bo" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Sebastian Nagel</span></a></div><small class="avatar__subtitle" itemprop="description">Software Engineering Lead, IOG</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>This report summarizes the work on Hydra since November 2022 and also serves as
a preparation &amp; write-up of the monthly review meeting, in which we update major
stakeholders of the project on recent developments and gather their feedback on
our proposed plan forward each month.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="roadmap">Roadmap<a href="#roadmap" class="hash-link" aria-label="Direct link to Roadmap" title="Direct link to Roadmap">â€‹</a></h2>
<p>Looking at our <a href="https://github.com/orgs/input-output-hk/projects/21" target="_blank" rel="noopener noreferrer">roadmap</a> we
can report the following updates:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="notable-changes">Notable changes<a href="#notable-changes" class="hash-link" aria-label="Direct link to Notable changes" title="Direct link to Notable changes">â€‹</a></h4>
<ul>
<li>Completed <a href="https://github.com/input-output-hk/hydra/issues/194" target="_blank" rel="noopener noreferrer">Validate coordinated head protocol against formal model #194 </a></li>
<li>Detailed a follow-up <a href="https://github.com/input-output-hk/hydra/issues/656" target="_blank" rel="noopener noreferrer">Validate soundness with Model Based Testing #656</a></li>
<li>Focus on specification and gap-closing to support audit</li>
<li>Scoped down 0.9.0 to be only about script updates and moved <a href="https://github.com/input-output-hk/hydra/issues/215" target="_blank" rel="noopener noreferrer">Commit from external wallet #215</a> into next version</li>
<li>Groomed <a href="https://github.com/input-output-hk/hydra/issues/195" target="_blank" rel="noopener noreferrer">React to mainchain protocol changes #195</a></li>
<li>More users requesting <a href="https://github.com/input-output-hk/hydra/issues/196" target="_blank" rel="noopener noreferrer">Support timed transactions #196</a></li>
</ul>
<p><img decoding="async" loading="lazy" src="/assets/images/2022-12-roadmap-120a9df31c88202e1d06943bbcf156c8.png" width="3119" height="985" class="img_ev3q"></p>
<small><center><p>Latest roadmap with drafted 0.10.0 version.</p></center></small>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="development">Development<a href="#development" class="hash-link" aria-label="Direct link to Development" title="Direct link to Development">â€‹</a></h2>
<p><a href="https://github.com/input-output-hk/hydra/issues?q=is%3Aclosed+sort%3Aupdated-desc+closed%3A2022-11-30..2022-12-31" target="_blank" rel="noopener noreferrer">Issues closed since last report</a></p>
<p>This month we have been working on:</p>
<ul>
<li>
<p><strong>Fixed <code>AcquirePointTooOld</code> errors</strong> by changing the way the internal wallet
initializes its state
<a href="https://github.com/input-output-hk/hydra/pull/621" target="_blank" rel="noopener noreferrer">#621</a>. See the PR
description for details. This did not strictly happen this month, but we have
not mentioned it last time.</p>
</li>
<li>
<p><strong>Closed first gap in Head Contract</strong>: We collected gaps between specification
and current implementation in
<a href="https://github.com/input-output-hk/hydra/issues/452" target="_blank" rel="noopener noreferrer">#452</a> and started now
closing them. This first issue, was to prevent DoS / stalling of heads, by
bounding the lower and upper transaction validity time of the <code>close</code>
transaction. As always, time handling is hard and this required detailed
discussion in the form of an ADR. See
<a href="https://hydra.family/head-protocol/adr/21" target="_blank" rel="noopener noreferrer">ADR21</a> for more details.</p>
</li>
<li>
<p><strong>Reduced cost of commits</strong> by at least <strong>30%</strong> using reference scripts also
in the <code>commit</code> transaction. We only used reference scripts in <code>abort</code> so far.
This reduces the min ADA cost of <code>commit</code> because the transactions are roughly
5.2KB smaller.</p>
<p>Before:
<img decoding="async" loading="lazy" src="/assets/images/2022-12-commit-782f8dd66a0344326187358e3f41bc48.png" width="557" height="108" class="img_ev3q"></p>
<p>After:
<img decoding="async" loading="lazy" src="/assets/images/2022-12-commit-new-aad3874fc0d688c64d1e40fd556433d3.png" width="553" height="107" class="img_ev3q"></p>
</li>
<li>
<p><strong>Use nix flakes &amp; build docker images using nix</strong>: Triggered by a migration
to Cicero for a nix-based CI, we started using nix flakes for <code>nix build</code> and
<code>nix develop</code> instead of the legacy <code>nix-shell</code> in
<a href="https://github.com/input-output-hk/hydra/pull/646" target="_blank" rel="noopener noreferrer">#646</a>. While we ended up
sticking with Github Actions as the only CI and a Cachix cache, we extended
this work to build our docker images more efficiently using <code>nix</code> in
<a href="https://github.com/input-output-hk/hydra/pull/654" target="_blank" rel="noopener noreferrer">#654</a>.</p>
<p>Image sizes went down between 20-50%:</p>
<p><img decoding="async" loading="lazy" src="/assets/images/2022-12-docker-images-bc1665869d91e36b30b5191f084e141a.png" width="1552" height="244" class="img_ev3q"></p>
<p>While docker CI builds on <code>master</code> went down to 1-10min (from 10-30m+)!</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="hydra-v1-specification">Hydra V1 Specification<a href="#hydra-v1-specification" class="hash-link" aria-label="Direct link to Hydra V1 Specification" title="Direct link to Hydra V1 Specification">â€‹</a></h2>
<p>Finally, we bit the bullet and started a write-up of the specification. Over the
last couple of months we had worked with marked up versions (see below) of the
original paper and a GDoc to discuss and review the protocol as it was
implemented.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/2022-12-marked-up-paper-5354284a6ca23c01b74593af47a94fa2.png" width="707" height="540" class="img_ev3q"></p>
<p>As we also updated the security properties and proofs, we started aggregating a
LaTeX document on overleaf. While it holds a similar background and
preliminaries as the original paper, it only specifies a single version of the
protocol with no variants, less modularization, as well as explicit assumptions
and important notes for implementors.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/2022-12-spec-overleaf-36d2b23cfb2f8931a3e4200623041da1.png" width="1577" height="689" class="img_ev3q"></p>
<p>We aim to be publishing the spec as part of the main <a href="https://github.com/input-output-hk/hydra" target="_blank" rel="noopener noreferrer">hydra repository</a> soon.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="community">Community<a href="#community" class="hash-link" aria-label="Direct link to Community" title="Direct link to Community">â€‹</a></h2>
<ul>
<li>
<p><strong>Hydra for Payments project</strong> completed the first phase of this work stream
by tagging version <a href="https://github.com/obsidiansystems/hydra-pay/releases/tag/v0.1.0" target="_blank" rel="noopener noreferrer">0.1.0</a>.
This open source project conducted by Obsidian Systems and sponsored by IOG
created a great starting point for developers to build services/APIs of
payment channels using Hydra Head. This month we reviewed the improved
documentation and are looking forward to see this work applied to eventually
build fast &amp; cheap payments for light-wallet users and power payment channel
use cases from business-to-business (B2B) in the short-term.</p>
</li>
<li>
<p><strong>Hydra for Voting project</strong> kicked off this joint project between IOG
Research, Catalyst &amp; Hydra Tribes, and the Cardano Foundation. The goal is to
assess suitability of Hydra Head to support voting use cases by implementing
parts of Catalyst voting system on Hydra Head and benchmark execution at
scale. The kick-off meeting took place on December 15.</p>
</li>
<li>
<p><strong>Blog post by CF</strong>: To round off the year, Matthias wrote a nice
<a href="https://cardanofoundation.org/en/news/hydra-head-protocol-an-open-source-solution-for-scalability/" target="_blank" rel="noopener noreferrer">retrospective blog
post</a>
about Hydra at the CF. Besides summarizing our progress made in 2022 it also
gives an outlook where Hydra is headed for in 2023.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">â€‹</a></h2>
<p>Although Hydra is in essence an open source project right now, we would love to
make it &quot;even more open source&quot; in the coming months. Our vision of Hydra
requires to have the builders of the Cardano ecosystem to be part of this
journey. For that matter, we want not only to open up these monthly reports, but
the review meeting backing it as well!</p>
<p>This, besides our engagements with the community above, will allow the project
to grow beyond IOG &amp; CF contributions. To become the true Cardano open source
project we believe will be worthy to serve as the scalability component required
by the Cardano network.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/monthly/tags/monthly">monthly</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/monthly/tags/monthly/page/2"><div class="pagination-nav__label">Newer Entries</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/monthly/tags/monthly/page/4"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://static.iohk.io/terms/iohktermsandconditions.pdf" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms &amp; Conditions</a></li><li class="footer__item"><a href="https://static.iohk.io/terms/iog-privacy-policy.pdf" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy</a></li><li class="footer__item"><a href="https://github.com/orgs/cardano-scaling/people" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contributors</a></li></ul></div></div></div></footer></div>
</body>
</html>